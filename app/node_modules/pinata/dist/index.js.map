{"version":3,"sources":["../src/index.ts","../src/utils/custom-errors.ts","../src/core/functions/analytics/analyticsDateInterval.ts","../src/core/functions/analytics/analyticsTopUsage.ts","../src/core/functions/authentication/testAuthentication.ts","../src/core/functions/files/delete.ts","../src/core/functions/files/deleteFileVectors.ts","../src/core/functions/files/deleteSwap.ts","../src/core/functions/files/list.ts","../src/core/functions/files/pinnedFileUsage.ts","../src/core/functions/files/swapCid.ts","../src/core/functions/files/swapHistory.ts","../src/core/functions/files/totalStorageUsage.ts","../src/core/functions/files/updateFile.ts","../src/core/functions/files/vectorizeFile.ts","../src/core/functions/files/vectorizeQuery.ts","../src/core/functions/files/queue.ts","../src/core/functions/files/deletePinRequest.ts","../src/core/functions/gateway/getCid.ts","../src/utils/gateway-tools.ts","../src/core/functions/gateway/convertIPFSUrl.ts","../src/core/functions/gateway/createAccessLink.ts","../src/core/functions/groups/addToGroup.ts","../src/core/functions/groups/createGroup.ts","../src/core/functions/groups/deleteGroup.ts","../src/core/functions/groups/getGroup.ts","../src/core/functions/groups/listGroups.ts","../src/core/functions/groups/removeFromGroup.ts","../src/core/functions/groups/updateGroup.ts","../src/core/functions/keys/createKey.ts","../src/core/functions/keys/listKeys.ts","../src/core/functions/keys/revokeKeys.ts","../src/core/functions/uploads/base64.ts","../src/core/functions/uploads/createSignedUploadURL.ts","../src/utils/resumable.ts","../src/core/functions/uploads/file.ts","../src/core/functions/uploads/fileArray.ts","../src/core/functions/uploads/json.ts","../src/core/functions/uploads/url.ts","../src/core/functions/uploads/cid.ts","../src/utils/format-config.ts","../src/core/classes/analytics/Analytics.ts","../src/core/classes/analytics/utils.ts","../src/core/classes/analytics/AnalyticsFilter.ts","../src/core/classes/analytics/AnalyticsBandwidth.ts","../src/core/classes/analytics/AnalyticsBuilder.ts","../src/core/classes/analytics/AnalyticsRequests.ts","../src/core/classes/analytics/TimeIntervalAnalyticsBuilder.ts","../src/core/classes/groups/GroupsFilter.ts","../src/core/classes/groups/PublicGroups.ts","../src/core/classes/groups/PrivateGroups.ts","../src/core/classes/groups/Groups.ts","../src/core/classes/keys/Keys.ts","../src/core/classes/keys/FilterKeys.ts","../src/core/classes/gateways/Gateways.ts","../src/core/classes/gateways/OptimizeImageCreateSignedUrl.ts","../src/core/classes/gateways/OptimizeImageGetCid.ts","../src/core/classes/gateways/PrivateGateways.ts","../src/core/classes/gateways/PublicGateways.ts","../src/core/functions/files/getFile.ts","../src/core/classes/files/FilterFiles.ts","../src/core/classes/files/FilterQueue.ts","../src/core/classes/files/PublicFiles.ts","../src/core/classes/files/PrivateFiles.ts","../src/core/classes/files/Files.ts","../src/core/classes/uploads/UploadBuilder.ts","../src/core/classes/uploads/PublicUpload.ts","../src/core/classes/uploads/PrivateUpload.ts","../src/core/classes/uploads/Upload.ts","../src/core/functions/signatures/addSignature.ts","../src/core/functions/signatures/getSignature.ts","../src/core/functions/signatures/removeSignature.ts","../src/core/classes/signatures/PublicSignatures.ts","../src/core/classes/signatures/Signatures.ts","../src/core/pinataSDK.ts"],"sourcesContent":["export * from \"./core\";\nexport * from \"./utils\";\n","interface ErrorDetails {\n\terror?: string;\n\tcode?: string;\n\tmetadata?: Record<string, any>;\n}\n\nexport class PinataError extends Error {\n\tconstructor(\n\t\tmessage: string,\n\t\tpublic statusCode?: number,\n\t\tpublic details?: ErrorDetails,\n\t) {\n\t\tsuper(message);\n\t\tthis.name = \"PinataError\";\n\t}\n}\n\nexport class NetworkError extends PinataError {\n\tconstructor(message: string, statusCode?: number, details?: ErrorDetails) {\n\t\tsuper(message, statusCode, details);\n\t\tthis.name = \"NetworkError\";\n\t}\n}\n\nexport class AuthenticationError extends PinataError {\n\tconstructor(message: string, statusCode?: number, details?: ErrorDetails) {\n\t\tsuper(message, statusCode, details);\n\t\tthis.name = \"AuthenticationError\";\n\t}\n}\n\nexport class ValidationError extends PinataError {\n\tconstructor(message: string, details?: ErrorDetails) {\n\t\tsuper(message, undefined, details);\n\t\tthis.name = \"ValidationError\";\n\t}\n}\n","import type {\n\tTimeIntervalAnalyticsQuery,\n\tTimeIntervalAnalyticsResponse,\n\tPinataConfig,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const analyticsDateInterval = async (\n\tconfig: PinataConfig | undefined,\n\toptions?: TimeIntervalAnalyticsQuery,\n): Promise<TimeIntervalAnalyticsResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tconst {\n\t\t\tcid,\n\t\t\tgateway_domain,\n\t\t\tstart_date,\n\t\t\tend_date,\n\t\t\tfile_name,\n\t\t\tuser_agent,\n\t\t\tcountry,\n\t\t\tregion,\n\t\t\treferer,\n\t\t\tlimit,\n\t\t\tsort_order,\n\t\t\tdate_interval,\n\t\t\tsort_by,\n\t\t} = options;\n\n\t\tif (cid) params.append(\"cid\", cid);\n\t\tif (gateway_domain) params.append(\"gateway_domain\", gateway_domain);\n\t\tif (start_date) params.append(\"start_date\", start_date);\n\t\tif (end_date) params.append(\"end_date\", end_date);\n\t\tif (file_name) params.append(\"file_name\", file_name);\n\t\tif (user_agent) params.append(\"user_agent\", user_agent.toString());\n\t\tif (country) params.append(\"country\", country.toString());\n\t\tif (region) params.append(\"region\", region);\n\t\tif (referer) params.append(\"referer\", referer.toString());\n\t\tif (limit) params.append(\"limit\", limit.toString());\n\t\tif (sort_order) params.append(\"sort_order\", sort_order);\n\t\tif (sort_by) params.append(\"sort_by\", sort_by);\n\t\tif (date_interval) params.append(\"by\", date_interval);\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tconst url = `${endpoint}/ipfs/gateway_analytics_time_series?${params.toString()}`;\n\n\ttry {\n\t\tlet headers: Record<string, string>;\n\n\t\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\t\theaders = { ...config.customHeaders };\n\t\t} else {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\tSource: \"sdk/analyticsDateInterval\",\n\t\t\t};\n\t\t}\n\n\t\tconst request = await fetch(url, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: TimeIntervalAnalyticsResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing anaytics usage: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while fetching gateway usage\",\n\t\t);\n\t}\n};\n","import type {\n\tTopAnalyticsQuery,\n\tTopAnalyticsItem,\n\tPinataConfig,\n\tTopAnalyticsResponse,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const analyticsTopUsage = async (\n\tconfig: PinataConfig | undefined,\n\toptions?: TopAnalyticsQuery,\n): Promise<TopAnalyticsResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tconst {\n\t\t\tcid,\n\t\t\tgateway_domain,\n\t\t\tstart_date,\n\t\t\tend_date,\n\t\t\tfile_name,\n\t\t\tuser_agent,\n\t\t\tcountry,\n\t\t\tregion,\n\t\t\treferer,\n\t\t\tlimit,\n\t\t\tsort_order,\n\t\t\tsort_by,\n\t\t\tattribute,\n\t\t} = options;\n\n\t\tconst domain = gateway_domain || config.pinataGateway;\n\t\tif (domain) {\n\t\t\t// Remove 'https://' if present\n\t\t\tconst cleanDomain = domain.replace(/^https?:\\/\\//, \"\");\n\t\t\tparams.append(\"gateway_domain\", cleanDomain);\n\t\t}\n\t\tif (cid) {\n\t\t\tparams.append(\"cid\", cid);\n\t\t}\n\t\tif (start_date) params.append(\"start_date\", start_date);\n\t\tif (end_date) params.append(\"end_date\", end_date);\n\t\tif (file_name) params.append(\"file_name\", file_name);\n\t\tif (user_agent) params.append(\"user_agent\", user_agent.toString());\n\t\tif (country) params.append(\"country\", country.toString());\n\t\tif (region) params.append(\"region\", region);\n\t\tif (referer) params.append(\"referer\", referer.toString());\n\t\tif (limit) params.append(\"limit\", limit.toString());\n\t\tif (sort_order) params.append(\"sort_order\", sort_order);\n\t\tif (sort_by) params.append(\"sort_by\", sort_by);\n\t\tif (attribute) params.append(\"by\", attribute);\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tconst url = `${endpoint}/ipfs/gateway_analytics_top?${params.toString()}`;\n\n\ttry {\n\t\tlet headers: Record<string, string>;\n\n\t\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\t\theaders = { ...config.customHeaders };\n\t\t} else {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\tSource: \"sdk/analyticsTopUsage\",\n\t\t\t};\n\t\t}\n\n\t\tconst request = await fetch(url, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: TopAnalyticsResponse = await request.json();\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing anaytics usage: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while fetching gateway usage\",\n\t\t);\n\t}\n};\n","import type { PinataConfig } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const testAuthentication = async (config: PinataConfig | undefined) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\tlet endpoint: string = \"https://api.pinata.cloud\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/testAuthentication\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/data/testAuthentication`, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: string = await request.json();\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing authentication: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while testing authentication\",\n\t\t);\n\t}\n};\n","import type { PinataConfig, DeleteResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nconst wait = (milliseconds: number): Promise<void> => {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(resolve, milliseconds);\n\t});\n};\n\nexport const deleteFile = async (\n\tconfig: PinataConfig | undefined,\n\tfiles: string[],\n\tprivacy: \"public\" | \"private\",\n): Promise<DeleteResponse[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst responses: DeleteResponse[] = [];\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/deleteFile\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tfor (const id of files) {\n\t\ttry {\n\t\t\tconst response = await fetch(`${endpoint}/files/${privacy}/${id}`, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: headers,\n\t\t\t});\n\n\t\t\tawait wait(300);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconst errorData = await response.text();\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\tresponse.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error`, response.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: response.statusText,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tlet errorMessage: string;\n\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\terrorMessage = error.message;\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\terrorMessage = `Error deleting file ${id}: ${error.message}`;\n\t\t\t} else {\n\t\t\t\terrorMessage = `An unknown error occurred while deleting file ${id}`;\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: errorMessage,\n\t\t\t});\n\t\t}\n\t}\n\treturn responses;\n};\n","import type { PinataConfig, VectorizeFileResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const deleteFileVectors = async (\n\tconfig: PinataConfig | undefined,\n\tfileId: string,\n): Promise<VectorizeFileResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/vectorizeFile\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/vectorize/files/${fileId}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: headers,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: VectorizeFileResponse = await request.json();\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing vectorize file: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while vectorizing file\");\n\t}\n};\n","import type { SwapCidResponse, PinataConfig } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const deleteSwap = async (\n\tconfig: PinataConfig | undefined,\n\tcid: string,\n\tnetwork: \"public\" | \"private\",\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/deleteSwap\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/${network}/swap/${cid}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: headers,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(`Authentication failed`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (request.status === 403) {\n\t\t\t\tthrow new PinataError(\n\t\t\t\t\t\"Unauthorized CID Swap Deletion\",\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"UNAUTHORIZED\",\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (request.status === 404) {\n\t\t\t\tthrow new PinataError(\"CID not pinned to account\", request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"NOT_FOUND\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error occurred`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"NETWORK_ERROR\",\n\t\t\t});\n\t\t}\n\n\t\treturn request.statusText;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing deleteSwap: ${error.message}`,\n\t\t\t\tundefined,\n\t\t\t\t{\n\t\t\t\t\tcode: \"DELETE_SWAP_ERROR\",\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while deleting swap\",\n\t\t\tundefined,\n\t\t\t{\n\t\t\t\tcode: \"UNKNOWN_ERROR\",\n\t\t\t},\n\t\t);\n\t}\n};\n","import type {\n\tFileListQuery,\n\tFileListResponse,\n\tPinataConfig,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const listFiles = async (\n\tconfig: PinataConfig | undefined,\n\tprivacy: \"private\" | \"public\",\n\toptions?: FileListQuery,\n): Promise<FileListResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tconst {\n\t\t\tname,\n\t\t\tgroup,\n\t\t\tcid,\n\t\t\torder,\n\t\t\tlimit,\n\t\t\tmimeType,\n\t\t\tpageToken,\n\t\t\tcidPending,\n\t\t\tmetadata,\n\t\t\tnoGroup,\n\t\t} = options;\n\n\t\tif (limit) params.append(\"limit\", limit.toString());\n\t\tif (name) params.append(\"name\", name);\n\t\tif (group) params.append(\"group\", group);\n\t\tif (cid) params.append(\"cid\", cid);\n\t\tif (mimeType) params.append(\"mimeType\", mimeType);\n\t\tif (order) params.append(\"order\", order);\n\t\tif (pageToken) params.append(\"pageToken\", pageToken);\n\t\tif (cidPending) params.append(\"cidPending\", \"true\");\n\t\tif (noGroup) params.append(\"group\", \"null\");\n\t\tif (metadata && typeof metadata === \"object\") {\n\t\t\tObject.entries(metadata).forEach(([key, value]) => {\n\t\t\t\tparams.append(`keyvalues[${key.toString()}]`, value.toString());\n\t\t\t});\n\t\t}\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tconst url = `${endpoint}/files/${privacy}?${params.toString()}`;\n\n\ttry {\n\t\tlet headers: Record<string, string>;\n\n\t\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\t...config.customHeaders,\n\t\t\t};\n\t\t} else {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\tSource: \"sdk/listFiles\",\n\t\t\t};\n\t\t}\n\n\t\tconst request = await fetch(url, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: FileListResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing list files: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while listing files\");\n\t}\n};\n","import type { PinataConfig, UserPinnedDataResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const pinnedFileCount = async (\n\tconfig: PinataConfig | undefined,\n): Promise<number> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/pinnedFileUsage\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/data/userPinnedDataTotal`, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tconst res: UserPinnedDataResponse = await request.json();\n\t\treturn res.pin_count;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing pinnedFileUsage: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while getting pinned file usage\",\n\t\t);\n\t}\n};\n","import type {\n\tSwapCidOptions,\n\tSwapCidResponse,\n\tPinataConfig,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const swapCid = async (\n\tconfig: PinataConfig | undefined,\n\toptions: SwapCidOptions,\n\tnetwork: \"public\" | \"private\",\n): Promise<SwapCidResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst data = JSON.stringify({\n\t\tswap_cid: options.swapCid,\n\t});\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/swapCid\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/files/${network}/swap/${options.cid}`,\n\t\t\t{\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: headers,\n\t\t\t\tbody: data,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (request.status === 403) {\n\t\t\t\tthrow new PinataError(\"Unauthorized CID Swap\", request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (request.status === 404) {\n\t\t\t\tthrow new PinataError(\"CID not pinned to account\", request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: SwapCidResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing CID Swap: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while swapping CID\");\n\t}\n};\n","import type {\n\tSwapCidResponse,\n\tPinataConfig,\n\tSwapHistoryOptions,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const swapHistory = async (\n\tconfig: PinataConfig | undefined,\n\toptions: SwapHistoryOptions,\n\tnetwork: \"public\" | \"private\",\n): Promise<SwapCidResponse[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/swapHistory\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/files/${network}/swap/${options.cid}?domain=${options.domain}`,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (request.status === 404) {\n\t\t\t\tthrow new PinataError(\"CID does not have history\", request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: SwapCidResponse[] = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error fetching swap history: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while fetching swap history\",\n\t\t);\n\t}\n};\n","import type { PinataConfig, UserPinnedDataResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const totalStorageUsage = async (\n\tconfig: PinataConfig | undefined,\n): Promise<number> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = { ...config.customHeaders };\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/totalStorageUsage\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/data/userPinnedDataTotal`, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tconst res: UserPinnedDataResponse = await request.json();\n\t\treturn res.pin_size_total;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing totalStorageUsage: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while getting total storage usage\",\n\t\t);\n\t}\n};\n","import type {\n\tFileListItem,\n\tPinataConfig,\n\tUpdateFileOptions,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const updateFile = async (\n\tconfig: PinataConfig | undefined,\n\toptions: UpdateFileOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<FileListItem> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tif (\n\t\t!options.name &&\n\t\t(!options.keyvalues || Object.keys(options.keyvalues).length === 0)\n\t) {\n\t\tthrow new ValidationError(\n\t\t\t\"At least one of 'name' or 'keyvalues' must be provided\",\n\t\t);\n\t}\n\n\tconst data: Record<string, any> = {};\n\n\tif (options.name !== undefined) {\n\t\tdata.name = options.name;\n\t}\n\tif (options.keyvalues && Object.keys(options.keyvalues).length > 0) {\n\t\tdata.keyvalues = options.keyvalues;\n\t}\n\n\tconst body = JSON.stringify(data);\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/updateMetadata\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/${privacy}/${options.id}`, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: headers,\n\t\t\tbody: body,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: FileListItem = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing updateFile: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while updating file\");\n\t}\n};\n","import type { PinataConfig, VectorizeFileResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const vectorizeFile = async (\n\tconfig: PinataConfig | undefined,\n\tfileId: string,\n): Promise<VectorizeFileResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/vectorizeFile\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/vectorize/files/${fileId}`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: VectorizeFileResponse = await request.json();\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing vectorize file: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while vectorizing file\");\n\t}\n};\n","import type {\n\tGetCIDResponse,\n\tPinataConfig,\n\tVectorizeQuery,\n\tVectorizeQueryResponse,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nimport { getCid } from \"../../functions\";\n\nexport const vectorizeQuery = async (\n\tconfig: PinataConfig | undefined,\n\toptions: VectorizeQuery,\n): Promise<VectorizeQueryResponse | GetCIDResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/vectorQuery\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tconst body = JSON.stringify({\n\t\ttext: options.query,\n\t});\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/vectorize/groups/${options.groupId}/query`,\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: headers,\n\t\t\t\tbody: body,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: VectorizeQueryResponse = res.data;\n\n\t\tif (options.returnFile) {\n\t\t\tif (resData.matches.length === 0) {\n\t\t\t\tthrow new PinataError(`No files returned in query to fetch`);\n\t\t\t}\n\t\t\tconst cid = resData.matches[0].cid;\n\t\t\tconst fileRes: GetCIDResponse = await getCid(config, cid, \"files\");\n\t\t\treturn fileRes;\n\t\t}\n\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing vectorize file: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while vectorizing file\");\n\t}\n};\n","import type {\n\tPinQueueItem,\n\tPinQueueQuery,\n\tPinQueueResponse,\n\tPinataConfig,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const queue = async (\n\tconfig: PinataConfig | undefined,\n\toptions?: PinQueueQuery,\n): Promise<PinQueueResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst params = new URLSearchParams({\n\t\tincludesCount: \"false\",\n\t});\n\n\tif (options) {\n\t\tconst { cid, status, sort, limit, pageToken } = options;\n\n\t\tif (cid) params.append(\"cid\", cid.toString());\n\t\tif (status) params.append(\"status\", status.toString());\n\t\tif (sort) params.append(\"sort\", sort.toString());\n\t\tif (limit) params.append(\"limit\", limit.toString());\n\t\tif (pageToken) params.append(\"pageToken\", pageToken.toString());\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tconst url = `${endpoint}/files/public/pin_by_cid?${params.toString()}`;\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/pinJobs\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(url, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tconst res = await request.json();\n\t\tconst resData: PinQueueResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing pinJobs: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while listing pin jobs\");\n\t}\n};\n","import type { PinataConfig } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const deletePinRequest = async (\n\tconfig: PinataConfig | undefined,\n\tid: string,\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/deletePinRequest\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst response = await fetch(`${endpoint}/files/public/pin_by_cid/${id}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: headers,\n\t\t});\n\n\t\tif (!response.ok) {\n\t\t\tconst errorData = await response.text();\n\t\t\tif (response.status === 401) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\tresponse.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error`, response.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\treturn \"OK\";\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error deleting pin by request: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while deleting pin by CID request\",\n\t\t);\n\t}\n};\n","import type {\n\tGetCIDResponse,\n\tPinataConfig,\n\tOptimizeImageOptions,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const getCid = async (\n\tconfig: PinataConfig | undefined,\n\tcid: string,\n\tgatewayType?: \"ipfs\" | \"files\",\n\toptions?: OptimizeImageOptions,\n): Promise<GetCIDResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet data: JSON | string | Blob;\n\tlet newUrl: string = `${config?.pinataGateway}/${gatewayType}/${cid}`;\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tif (options.width) params.append(\"img-width\", options.width.toString());\n\t\tif (options.height) params.append(\"img-height\", options.height.toString());\n\t\tif (options.dpr) params.append(\"img-dpr\", options.dpr.toString());\n\t\tif (options.fit) params.append(\"img-fit\", options.fit);\n\t\tif (options.gravity) params.append(\"img-gravity\", options.gravity);\n\t\tif (options.quality)\n\t\t\tparams.append(\"img-quality\", options.quality.toString());\n\t\tif (options.format) params.append(\"img-format\", options.format);\n\t\tif (options.animation !== undefined)\n\t\t\tparams.append(\"img-anim\", options.animation.toString());\n\t\tif (options.sharpen)\n\t\t\tparams.append(\"img-sharpen\", options.sharpen.toString());\n\t\tif (options.onError === true) params.append(\"img-onerror\", \"redirect\");\n\t\tif (options.metadata) params.append(\"img-metadata\", options.metadata);\n\t}\n\n\tif (config?.pinataGatewayKey) {\n\t\tparams.append(\"pinataGatewayToken\", config.pinataGatewayKey);\n\t}\n\n\tconst queryString = params.toString();\n\tif (queryString) {\n\t\tnewUrl += `?${queryString}`;\n\t}\n\n\tif (gatewayType === \"ipfs\") {\n\t\tconst request = await fetch(newUrl);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication Failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst contentType: string | null =\n\t\t\trequest.headers.get(\"content-type\")?.split(\";\")[0] || null;\n\n\t\tif (contentType?.includes(\"application/json\")) {\n\t\t\tdata = await request.json();\n\t\t} else if (contentType?.includes(\"text/\")) {\n\t\t\tdata = await request.text();\n\t\t} else {\n\t\t\tdata = await request.blob();\n\t\t}\n\n\t\tconst res: GetCIDResponse = {\n\t\t\tdata: data,\n\t\t\tcontentType: contentType,\n\t\t};\n\n\t\treturn res;\n\t}\n\n\tconst date = Math.floor(new Date().getTime() / 1000);\n\n\tconst payload = JSON.stringify({\n\t\turl: newUrl,\n\t\tdate: date,\n\t\texpires: 30,\n\t\tmethod: \"GET\",\n\t});\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/getCid\",\n\t\t};\n\t}\n\n\tconst signedUrlRequest = await fetch(`${endpoint}/files/sign`, {\n\t\tmethod: \"POST\",\n\t\theaders: headers,\n\t\tbody: payload,\n\t});\n\n\tconst signedUrl = await signedUrlRequest.json();\n\n\ttry {\n\t\tconst request = await fetch(signedUrl.data);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication Failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst contentType: string | null =\n\t\t\trequest.headers.get(\"content-type\")?.split(\";\")[0] || null;\n\n\t\tif (contentType?.includes(\"application/json\")) {\n\t\t\tdata = await request.json();\n\t\t} else if (contentType?.includes(\"text/\")) {\n\t\t\tdata = await request.text();\n\t\t} else {\n\t\t\tdata = await request.blob();\n\t\t}\n\n\t\tconst res: GetCIDResponse = {\n\t\t\tdata: data,\n\t\t\tcontentType: contentType,\n\t\t};\n\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing getCid: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while getting CID contents\",\n\t\t);\n\t}\n};\n","import { ContainsCIDResponse } from \"../core/types\";\n\nfunction isValidCIDv0(cid: string): boolean {\n\t// CIDv0 is a 46-character base58-encoded string starting with \"Qm\"\n\treturn /^Qm[1-9A-HJ-NP-Za-km-z]{44}$/.test(cid);\n}\n\nfunction isValidCIDv1(cid: string): boolean {\n\t// CIDv1 typically starts with \"b\" and uses base32 encoding\n\treturn /^b[a-z2-7]{58,}$/.test(cid);\n}\n\nfunction isCID(str: string): boolean {\n\t// Remove any leading/trailing whitespace\n\tstr = str.trim();\n\treturn isValidCIDv0(str) || isValidCIDv1(str);\n}\n\nexport async function containsCID(input: string): Promise<ContainsCIDResponse> {\n\tif (typeof input !== \"string\") {\n\t\tthrow new Error(\"Input is not a string\");\n\t}\n\n\t// Helper function to check if a string starts with a CID\n\tconst startsWithCID = (str: string) => {\n\t\tconst parts = str.split(\"/\");\n\t\treturn isCID(parts[0]) ? parts[0] : null;\n\t};\n\n\t// Check if the input itself is a CID or starts with a CID\n\tconst directCID = startsWithCID(input);\n\tif (directCID) {\n\t\treturn {\n\t\t\tcontainsCid: true,\n\t\t\tcid: directCID,\n\t\t};\n\t}\n\n\tlet url: URL;\n\ttry {\n\t\t// Try to parse the input as a URL\n\t\turl = new URL(input);\n\t} catch (error) {\n\t\t// If parsing fails, treat the input as a potential path-like string\n\t\tconst parts = input.split(/\\/|\\?/);\n\t\tfor (const part of parts) {\n\t\t\tconst cid = startsWithCID(part);\n\t\t\tif (cid) {\n\t\t\t\treturn {\n\t\t\t\t\tcontainsCid: true,\n\t\t\t\t\tcid: cid,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tcontainsCid: false,\n\t\t\tcid: null,\n\t\t};\n\t}\n\n\t// Check for CID in subdomain\n\tconst subdomains = url.hostname.split(\".\");\n\tfor (const subdomain of subdomains) {\n\t\tif (isCID(subdomain)) {\n\t\t\treturn {\n\t\t\t\tcontainsCid: true,\n\t\t\t\tcid: subdomain,\n\t\t\t};\n\t\t}\n\t}\n\n\t// Check for CID in path\n\tconst pathParts = url.pathname.split(\"/\");\n\tfor (const part of pathParts) {\n\t\tconst cid = startsWithCID(part);\n\t\tif (cid) {\n\t\t\treturn {\n\t\t\t\tcontainsCid: true,\n\t\t\t\tcid: cid,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn {\n\t\tcontainsCid: false,\n\t\tcid: null,\n\t};\n}\n\nexport async function convertToDesiredGateway(\n\tsourceUrl: string,\n\tdesiredGatewayPrefix: string | undefined,\n) {\n\tconst results = await containsCID(sourceUrl);\n\n\tif (results.containsCid !== true) {\n\t\tthrow new Error(\"url does not contain CID\");\n\t}\n\n\tif (!sourceUrl.startsWith(\"https\") && !sourceUrl.startsWith(\"ipfs://\")) {\n\t\treturn `${desiredGatewayPrefix}/ipfs/${sourceUrl}`;\n\t}\n\n\tconst urlObj = new URL(sourceUrl);\n\tconst path = urlObj.pathname + urlObj.search + urlObj.hash;\n\n\t//case 1 - the ipfs://cid path\n\tif (sourceUrl.startsWith(`ipfs://${results.cid}`)) {\n\t\treturn `${desiredGatewayPrefix}/ipfs/${results.cid}${path}`;\n\t}\n\n\t//case 2 - the /ipfs/cid path (this should cover ipfs://ipfs/cid as well)\n\tif (sourceUrl.includes(`/ipfs/${results.cid}`)) {\n\t\treturn `${desiredGatewayPrefix}${path}`;\n\t}\n\n\t//case 3 - the /ipns/cid path\n\tif (sourceUrl.includes(`/ipns/${results.cid}`)) {\n\t\treturn `${desiredGatewayPrefix}${path}`;\n\t}\n\n\t//case 4 - the CID is in the subdomain\n\tif (urlObj.hostname.includes(results.cid!)) {\n\t\treturn `${desiredGatewayPrefix}/ipfs/${results.cid}${path}`;\n\t}\n\n\t//this is the fallback if no supported patterns are provided\n\tthrow new Error(\n\t\t\"unsupported URL pattern, please submit a github issue with the URL utilized\",\n\t);\n}\n","import { convertToDesiredGateway } from \"../../../utils/gateway-tools\";\nimport type { PinataConfig } from \"../../types\";\n\nexport const convertIPFSUrl = async (\n\tconfig: PinataConfig | undefined,\n\turl: string,\n\tgatewayPrefix?: string,\n): Promise<string> => {\n\tlet newUrl: string;\n\tlet prefix: string =\n\t\tgatewayPrefix || config?.pinataGateway || \"https://gateway.pinata.cloud\";\n\tnewUrl = await convertToDesiredGateway(url, prefix);\n\tif (config?.pinataGatewayKey) {\n\t\t`${newUrl}?pinataGatewayToken=${config?.pinataGatewayKey}`;\n\t}\n\treturn newUrl;\n};\n","import type {\n\tPinataConfig,\n\tOptimizeImageOptions,\n\tAccessLinkOptions,\n} from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const createAccessLink = async (\n\tconfig: PinataConfig | undefined,\n\toptions: AccessLinkOptions,\n\timgOpts: OptimizeImageOptions,\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet baseUrl: string | undefined;\n\n\tif (options?.gateway) {\n\t\tbaseUrl = options.gateway.startsWith(\"https://\")\n\t\t\t? options.gateway\n\t\t\t: `https://${options.gateway}`;\n\t} else {\n\t\tbaseUrl = config.pinataGateway;\n\t}\n\n\tlet newUrl: string = `${baseUrl}/files/${options.cid}`;\n\n\tconst params = new URLSearchParams();\n\n\tif (imgOpts) {\n\t\tif (imgOpts.width) params.append(\"img-width\", imgOpts.width.toString());\n\t\tif (imgOpts.height) params.append(\"img-height\", imgOpts.height.toString());\n\t\tif (imgOpts.dpr) params.append(\"img-dpr\", imgOpts.dpr.toString());\n\t\tif (imgOpts.fit) params.append(\"img-fit\", imgOpts.fit);\n\t\tif (imgOpts.gravity) params.append(\"img-gravity\", imgOpts.gravity);\n\t\tif (imgOpts.quality)\n\t\t\tparams.append(\"img-quality\", imgOpts.quality.toString());\n\t\tif (imgOpts.format) params.append(\"img-format\", imgOpts.format);\n\t\tif (imgOpts.animation !== undefined)\n\t\t\tparams.append(\"img-anim\", imgOpts.animation.toString());\n\t\tif (imgOpts.sharpen)\n\t\t\tparams.append(\"img-sharpen\", imgOpts.sharpen.toString());\n\t\tif (imgOpts.onError === true) params.append(\"img-onerror\", \"redirect\");\n\t\tif (imgOpts.metadata) params.append(\"img-metadata\", imgOpts.metadata);\n\t}\n\n\tconst queryString = params.toString();\n\n\tif (queryString) {\n\t\tnewUrl += `?${queryString}`;\n\t}\n\n\tconst date = options?.date || Math.floor(new Date().getTime() / 1000);\n\n\tconst payload = JSON.stringify({\n\t\turl: newUrl,\n\t\tdate: date,\n\t\texpires: options.expires,\n\t\tmethod: \"GET\",\n\t});\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/createSignURL\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/private/download_link`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: payload,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication Failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\treturn res.data;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing createSignedURL: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while getting signed url\");\n\t}\n};\n","import type {\n\tGroupCIDOptions,\n\tPinataConfig,\n\tUpdateGroupFilesResponse,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const addToGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: GroupCIDOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<UpdateGroupFilesResponse[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst wait = (milliseconds: number): Promise<void> => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(resolve, milliseconds);\n\t\t});\n\t};\n\n\tconst responses: UpdateGroupFilesResponse[] = [];\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/addToGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tfor (const id of options.files) {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`${endpoint}/groups/${privacy}/${options.groupId}/ids/${id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"PUT\",\n\t\t\t\t\theaders: headers,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tawait wait(300);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconst errorData = await response.text();\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\tresponse.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, response.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: response.statusText,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tlet errorMessage: string;\n\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\terrorMessage = error.message;\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\terrorMessage = `Error adding file ${id} to group: ${error.message}`;\n\t\t\t} else {\n\t\t\t\terrorMessage = `An unknown error occurred while adding file ${id} to group`;\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: errorMessage,\n\t\t\t});\n\t\t}\n\t}\n\treturn responses;\n};\n","import type {\n\tPinataConfig,\n\tGroupOptions,\n\tGroupResponseItem,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const createGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: GroupOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<GroupResponseItem> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst data = JSON.stringify({\n\t\tname: options.name,\n\t\tis_public: options.isPublic,\n\t});\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/createGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/groups/${privacy}`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: GroupResponseItem = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing createGroup: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while creating a group\");\n\t}\n};\n","import type { GetGroupOptions, PinataConfig } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const deleteGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: GetGroupOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/deleteGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/groups/${privacy}/${options.groupId}`,\n\t\t\t{\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: string = request.statusText;\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing deleteGroup: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while deleting a group\");\n\t}\n};\n","import type {\n\tPinataConfig,\n\tGroupResponseItem,\n\tGetGroupOptions,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const getGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: GetGroupOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<GroupResponseItem> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/getGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/groups/${privacy}/${options.groupId}`,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: GroupResponseItem = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing getGroup: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while getting info for a group\",\n\t\t);\n\t}\n};\n","import type {\n\tPinataConfig,\n\tGroupResponseItem,\n\tGroupQueryOptions,\n\tGroupListResponse,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const listGroups = async (\n\tconfig: PinataConfig | undefined,\n\tprivacy: \"public\" | \"private\",\n\toptions?: GroupQueryOptions,\n): Promise<GroupListResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/listGroups\",\n\t\t};\n\t}\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tconst { pageToken, name, limit, isPublic } = options;\n\n\t\tif (pageToken) params.append(\"pageToken\", pageToken.toString());\n\t\tif (isPublic) params.append(\"isPublic\", isPublic.toString());\n\t\tif (name) params.append(\"name\", name);\n\t\tif (limit !== undefined) params.append(\"limit\", limit.toString());\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/groups/${privacy}?${params.toString()}`,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: GroupListResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing listGroups: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while listing groups\");\n\t}\n};\n","import type {\n\tGroupCIDOptions,\n\tPinataConfig,\n\tUpdateGroupFilesResponse,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const removeFromGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: GroupCIDOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<UpdateGroupFilesResponse[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst wait = (milliseconds: number): Promise<void> => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(resolve, milliseconds);\n\t\t});\n\t};\n\n\tconst responses: UpdateGroupFilesResponse[] = [];\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/addToGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tfor (const id of options.files) {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`${endpoint}/groups/${privacy}/${options.groupId}/ids/${id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"DELETE\",\n\t\t\t\t\theaders: headers,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tawait wait(300);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconst errorData = await response.text();\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\tresponse.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, response.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: response.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: response.statusText,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tlet errorMessage: string;\n\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\terrorMessage = error.message;\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\terrorMessage = `Error adding file ${id} to group: ${error.message}`;\n\t\t\t} else {\n\t\t\t\terrorMessage = `An unknown error occurred while adding file ${id} to group`;\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tid: id,\n\t\t\t\tstatus: errorMessage,\n\t\t\t});\n\t\t}\n\t}\n\treturn responses;\n};\n","import type {\n\tPinataConfig,\n\tGroupResponseItem,\n\tUpdateGroupOptions,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const updateGroup = async (\n\tconfig: PinataConfig | undefined,\n\toptions: UpdateGroupOptions,\n\tprivacy: \"public\" | \"private\",\n): Promise<GroupResponseItem> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst data = JSON.stringify({\n\t\tname: options.name,\n\t\tis_public: options.isPublic,\n\t});\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/updateGroup\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/groups/${privacy}/${options.groupId}`,\n\t\t\t{\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: headers,\n\t\t\t\tbody: data,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: GroupResponseItem = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing updateGroup: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while updating group\");\n\t}\n};\n","import type { PinataConfig, KeyOptions, KeyResponse } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const createKey = async (\n\tconfig: PinataConfig | undefined,\n\toptions: KeyOptions,\n): Promise<KeyResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/createKey\",\n\t\t};\n\t}\n\n\tconst data = JSON.stringify(options);\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/pinata/keys`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: KeyResponse = await request.json();\n\t\treturn res;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing createKey: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while creating API key\");\n\t}\n};\n","import type {\n\tKeyListItem,\n\tKeyListQuery,\n\tKeyListResponse,\n\tPinataConfig,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const listKeys = async (\n\tconfig: PinataConfig | undefined,\n\toptions?: KeyListQuery,\n): Promise<KeyListItem[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/listKeys\",\n\t\t};\n\t}\n\n\tconst params = new URLSearchParams();\n\n\tif (options) {\n\t\tconst { offset, name, revoked, limitedUse, exhausted } = options;\n\n\t\tif (offset) params.append(\"offset\", offset.toString());\n\t\tif (revoked !== undefined) params.append(\"revoked\", revoked.toString());\n\t\tif (limitedUse !== undefined)\n\t\t\tparams.append(\"limitedUse\", limitedUse.toString());\n\t\tif (exhausted !== undefined)\n\t\t\tparams.append(\"exhausted\", exhausted.toString());\n\t\tif (name) params.append(\"name\", name);\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/pinata/keys?${params.toString()}`,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res: KeyListResponse = await request.json();\n\t\treturn res.keys;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing listKeys: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while listing API keys\");\n\t}\n};\n","import type { PinataConfig, RevokeKeyResponse } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nconst wait = (milliseconds: number): Promise<void> => {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(resolve, milliseconds);\n\t});\n};\n\nexport const revokeKeys = async (\n\tconfig: PinataConfig | undefined,\n\tkeys: string[],\n): Promise<RevokeKeyResponse[]> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t\theaders = { ...config.customHeaders };\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/revokeKeys\",\n\t\t};\n\t}\n\n\tconst responses: RevokeKeyResponse[] = [];\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\tfor (const key of keys) {\n\t\ttry {\n\t\t\tconst request = await fetch(`${endpoint}/pinata/keys/${key}`, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: headers,\n\t\t\t});\n\n\t\t\tawait wait(300);\n\n\t\t\tif (!request.ok) {\n\t\t\t\tconst errorData = await request.text();\n\t\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\trequest.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst result: string = await request.json();\n\t\t\tresponses.push({\n\t\t\t\tkey: key,\n\t\t\t\tstatus: result,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tlet errorMessage: string;\n\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\terrorMessage = error.message;\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\terrorMessage = `Error revoking key ${key}: ${error.message}`;\n\t\t\t} else {\n\t\t\t\terrorMessage = `An unknown error occurred while revoking key ${key}`;\n\t\t\t}\n\n\t\t\tresponses.push({\n\t\t\t\tkey: key,\n\t\t\t\tstatus: errorMessage,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn responses;\n};\n","import type { PinataConfig, UploadResponse, UploadOptions } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const uploadBase64 = async (\n\tconfig: PinataConfig | undefined,\n\tbase64String: string,\n\tnetwork: \"private\" | \"public\",\n\toptions?: UploadOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config?.pinataJwt;\n\n\tconst name = options?.metadata?.name\n\t\t? options?.metadata?.name\n\t\t: \"base64 string\";\n\n\tconst buffer = Buffer.from(base64String, \"base64\");\n\n\tconst blob = new Blob([buffer]);\n\n\tconst data = new FormData();\n\n\tdata.append(\"file\", blob, name);\n\tdata.append(\"network\", network);\n\tdata.append(\"name\", name);\n\tif (options?.groupId) {\n\t\tdata.append(\"group_id\", options.groupId);\n\t}\n\tif (options?.metadata?.keyvalues) {\n\t\tdata.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\tSource: \"sdk/base64\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tif (options?.url) {\n\t\ttry {\n\t\t\tconst request = await fetch(options.url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: data,\n\t\t\t});\n\n\t\t\tif (!request.ok) {\n\t\t\t\tconst errorData = await request.text();\n\t\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\trequest.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst res = await request.json();\n\t\t\tconst resData: UploadResponse = res.data;\n\t\t\treturn resData;\n\t\t} catch (error) {\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow new PinataError(`Error processing base64: ${error.message}`);\n\t\t\t}\n\t\t\tthrow new PinataError(\n\t\t\t\t\"An unknown error occurred while trying to upload base64\",\n\t\t\t);\n\t\t}\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: UploadResponse = res.data;\n\t\tif (options?.vectorize) {\n\t\t\tconst vectorReq = await fetch(\n\t\t\t\t`${endpoint}/vectorize/files/${resData.id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (vectorReq.ok) {\n\t\t\t\tresData.vectorized = true;\n\t\t\t\treturn resData;\n\t\t\t} else {\n\t\t\t\tconst errorData = await vectorReq.text();\n\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t`HTTP error during vectorization: ${errorData}`,\n\t\t\t\t\tvectorReq.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing base64: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while trying to upload base64\",\n\t\t);\n\t}\n};\n","import type { PinataConfig, SignedUploadUrlOptions } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const createSignedUploadURL = async (\n\tconfig: PinataConfig | undefined,\n\toptions: SignedUploadUrlOptions,\n\tnetwork: \"public\" | \"private\",\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\ttype PayloadData = {\n\t\tdate: number;\n\t\texpires: number;\n\t\tgroup_id?: string;\n\t\tfilename?: string;\n\t\tkeyvalues?: Record<string, string>;\n\t\tnetwork?: \"public\" | \"private\";\n\t\tmax_file_size?: number;\n\t\tallow_mime_types?: string[];\n\t};\n\n\tconst date = options?.date || Math.floor(new Date().getTime() / 1000);\n\n\tconst payload: PayloadData = {\n\t\tdate: date,\n\t\texpires: options.expires,\n\t};\n\n\tif (options.groupId) {\n\t\tpayload.group_id = options.groupId;\n\t}\n\n\tif (options.name) {\n\t\tpayload.filename = options.name;\n\t}\n\n\tif (options.keyvalues) {\n\t\tpayload.keyvalues = options.keyvalues;\n\t}\n\n\tif (network) {\n\t\tpayload.network = network;\n\t}\n\n\tif (options.maxFileSize) {\n\t\tpayload.max_file_size = options.maxFileSize;\n\t}\n\n\tif (options.mimeTypes) {\n\t\tpayload.allow_mime_types = options.mimeTypes;\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\tSource: \"sdk/createSignURL\",\n\t\t};\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/sign`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: JSON.stringify(payload),\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication Failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\treturn res.data;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(\n\t\t\t\t`Error processing createSignedURL: ${error.message}`,\n\t\t\t);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while getting signed url\");\n\t}\n};\n","import { NetworkError } from \"./custom-errors\";\n\nexport function getFileIdFromUrl(url: string): string {\n\tconst match = url.match(/\\/files\\/([^\\/]+)/);\n\tif (match && match[1]) {\n\t\treturn match[1];\n\t}\n\tthrow new NetworkError(\"File ID not found in URL\", 400, {\n\t\terror: \"File ID not found in URL\",\n\t\tcode: \"HTTP_ERROR\",\n\t\tmetadata: {\n\t\t\trequestUrl: url,\n\t\t},\n\t});\n}\n","import type { PinataConfig, UploadResponse, UploadOptions } from \"../../types\";\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\nimport { getFileIdFromUrl } from \"../../../utils/resumable\";\n\nexport const uploadFile = async (\n\tconfig: PinataConfig | undefined,\n\tfile: File,\n\tnetwork: \"public\" | \"private\",\n\toptions?: UploadOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config.pinataJwt;\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tif (file.size > 94371840) {\n\t\tlet headers: Record<string, string>;\n\n\t\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t...config.customHeaders,\n\t\t\t};\n\t\t} else {\n\t\t\theaders = {\n\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\tSource: \"sdk/file\",\n\t\t\t};\n\t\t}\n\n\t\tconst name = options?.metadata?.name || file.name || \"File from SDK\";\n\n\t\tlet metadata: string = `filename ${btoa(name)},filetype ${btoa(file.type)},network ${btoa(network)}`;\n\n\t\tif (options?.groupId) {\n\t\t\tmetadata + `,group_id ${btoa(options.groupId)}`;\n\t\t}\n\n\t\tif (options?.metadata?.keyvalues) {\n\t\t\tmetadata +\n\t\t\t\t`,keyvalues ${btoa(JSON.stringify(options.metadata.keyvalues))}`;\n\t\t}\n\n\t\tlet updatedEndpoint: string = `${endpoint}/files`;\n\n\t\tif (options?.url) {\n\t\t\tupdatedEndpoint = options.url;\n\t\t}\n\n\t\tconst urlReq = await fetch(updatedEndpoint, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Upload-Length\": `${file.size}`,\n\t\t\t\t\"Upload-Metadata\": metadata,\n\t\t\t\t...headers,\n\t\t\t},\n\t\t});\n\t\tconst url = urlReq.headers.get(\"Location\");\n\t\tif (!url) {\n\t\t\tconst errorData = await urlReq.text();\n\t\t\tthrow new NetworkError(\"Upload URL not provided\", urlReq.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: urlReq.url,\n\t\t\t\t\trequestHeaders: urlReq.headers,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst chunkSize = 50 * 1024 * 1024; // 50MB in bytes\n\t\tconst totalChunks = Math.ceil(file.size / chunkSize);\n\t\tlet offset = 0;\n\t\tlet uploadReq: any;\n\n\t\tfor (let i = 0; i < totalChunks; i++) {\n\t\t\tconst chunk = file.slice(offset, offset + chunkSize);\n\t\t\tuploadReq = await fetch(url as string, {\n\t\t\t\tmethod: \"PATCH\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/offset+octet-stream\",\n\t\t\t\t\t\"Upload-Offset\": offset.toString(),\n\t\t\t\t\t...headers,\n\t\t\t\t},\n\t\t\t\tbody: chunk,\n\t\t\t});\n\n\t\t\tif (!uploadReq.ok) {\n\t\t\t\tconst errorData = await uploadReq.text();\n\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t`HTTP error during chunk upload: ${errorData}`,\n\t\t\t\t\tuploadReq.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: uploadReq.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toffset += chunk.size;\n\t\t}\n\n\t\tif (uploadReq.status === 204) {\n\t\t\tconst fileId = getFileIdFromUrl(url);\n\t\t\tlet dataEndpoint: string;\n\t\t\tif (config.endpointUrl) {\n\t\t\t\tdataEndpoint = config.endpointUrl;\n\t\t\t} else {\n\t\t\t\tdataEndpoint = \"https://api.pinata.cloud/v3\";\n\t\t\t}\n\t\t\tconst fileInfoReq = await fetch(\n\t\t\t\t`${dataEndpoint}/files/${network}/${fileId}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tconst fileInfo = await fileInfoReq.json();\n\t\t\tconst data: UploadResponse = fileInfo.data;\n\t\t\tif (options?.vectorize) {\n\t\t\t\tconst vectorReq = await fetch(\n\t\t\t\t\t`${endpoint}/vectorize/files/${data.id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tif (vectorReq.ok) {\n\t\t\t\t\tdata.vectorized = true;\n\t\t\t\t\treturn data;\n\t\t\t\t} else {\n\t\t\t\t\tconst errorData = await vectorReq.text();\n\t\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t\t`HTTP error during vectorization: ${errorData}`,\n\t\t\t\t\t\tvectorReq.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: vectorReq.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\tSource: \"sdk/file\",\n\t\t};\n\t}\n\n\tconst data = new FormData();\n\tdata.append(\"file\", file, file.name);\n\n\tdata.append(\"network\", network);\n\n\tdata.append(\"name\", options?.metadata?.name || file.name || \"File from SDK\");\n\n\tif (options?.groupId) {\n\t\tdata.append(\"group_id\", options.groupId);\n\t}\n\n\tif (options?.metadata?.keyvalues) {\n\t\tdata.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n\t}\n\n\tif (options?.url) {\n\t\ttry {\n\t\t\tconst request = await fetch(options.url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: headers,\n\t\t\t\tbody: data,\n\t\t\t});\n\n\t\t\tif (!request.ok) {\n\t\t\t\tconst errorData = await request.text();\n\t\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\trequest.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst res = await request.json();\n\t\t\tconst resData: UploadResponse = res.data;\n\t\t\treturn resData;\n\t\t} catch (error) {\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow new PinataError(`Error processing base64: ${error.message}`);\n\t\t\t}\n\t\t\tthrow new PinataError(\n\t\t\t\t\"An unknown error occurred while trying to upload base64\",\n\t\t\t);\n\t\t}\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tconst res = await request.json();\n\t\tconst resData: UploadResponse = res.data;\n\t\tif (options?.vectorize) {\n\t\t\tconst vectorReq = await fetch(\n\t\t\t\t`${endpoint}/vectorize/files/${resData.id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (vectorReq.ok) {\n\t\t\t\tresData.vectorized = true;\n\t\t\t\treturn resData;\n\t\t\t} else {\n\t\t\t\tconst errorData = await vectorReq.text();\n\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t`HTTP error during vectorization: ${errorData}`,\n\t\t\t\t\tvectorReq.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error uploading file: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while uploading the file\");\n\t}\n};\n","import type { PinataConfig, UploadResponse, UploadOptions } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const uploadFileArray = async (\n\tconfig: PinataConfig | undefined,\n\tfiles: File[],\n\tnetwork: \"public\" | \"private\",\n\toptions?: UploadOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config?.pinataJwt;\n\n\tconst folder = options?.metadata?.name || \"folder_from_sdk\";\n\n\tconst data = new FormData();\n\n\tfor (const file of Array.from(files)) {\n\t\tconst path = file.webkitRelativePath || `${folder}/${file.name}`;\n\t\tdata.append(\"file\", file, path);\n\t}\n\n\t// Reserved for later release\n\t// data.append(\"name\", folder);\n\n\t// data.append(\"network\", network);\n\n\t// if (options?.groupId) {\n\t//   data.append(\"group_id\", options.groupId);\n\t// }\n\n\t// if (options?.metadata?.keyvalues) {\n\t//   data.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n\t// }\n\n\t// Legacy\n\tdata.append(\n\t\t\"pinataMetadata\",\n\t\tJSON.stringify({\n\t\t\tname: folder,\n\t\t\tkeyvalues: options?.metadata?.keyvalues,\n\t\t}),\n\t);\n\n\tdata.append(\n\t\t\"pinataOptions\",\n\t\tJSON.stringify({\n\t\t\tgroupId: options?.groupId,\n\t\t\tcidVersion: 1,\n\t\t}),\n\t);\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\tSource: \"sdk/fileArray\",\n\t\t};\n\t}\n\t// Reserved for later release\n\t//let endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\tlet endpoint: string = \"https://api.pinata.cloud/pinning/pinFileToIPFS\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\ttry {\n\t\t// Reserved for later release\n\t\t// const request = await fetch(`${endpoint}/files`, {\n\t\t// \tmethod: \"POST\",\n\t\t// \theaders: headers,\n\t\t// \tbody: data,\n\t\t// });\n\t\tconst request = await fetch(`${endpoint}`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\n\t\tconst resData: UploadResponse = {\n\t\t\tid: res.ID,\n\t\t\tname: res.Name,\n\t\t\tcid: res.IpfsHash,\n\t\t\tsize: res.PinSize,\n\t\t\tcreated_at: res.Timestamp,\n\t\t\tnumber_of_files: res.NumberOfFiles,\n\t\t\tmime_type: res.MimeType,\n\t\t\tgroup_id: res.GroupId,\n\t\t\tkeyvalues: res.Keyvalues,\n\t\t\tvectorized: false,\n\t\t\tnetwork: \"public\",\n\t\t};\n\n\t\t// if (options?.vectorize) {\n\t\t//   const vectorReq = await fetch(\n\t\t//     `${endpoint}/vectorize/files/${resData.id}`,\n\t\t//     {\n\t\t//       method: \"POST\",\n\t\t//       headers: {\n\t\t//         Authorization: `Bearer ${jwt}`,\n\t\t//       },\n\t\t//     },\n\t\t//   );\n\t\t//   if (vectorReq.ok) {\n\t\t//     resData.vectorized = true;\n\t\t//     return resData;\n\t\t//   } else {\n\t\t//     const errorData = await vectorReq.text();\n\t\t//     throw new NetworkError(\n\t\t//       `HTTP error during vectorization: ${errorData}`,\n\t\t//       vectorReq.status,\n\t\t//       {\n\t\t//         error: errorData,\n\t\t//         code: \"HTTP_ERROR\",\n\t\t//         metadata: {\n\t\t//           requestUrl: request.url,\n\t\t//         },\n\t\t//       },\n\t\t//     );\n\t\t//   }\n\t\t// }\n\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing fileArray: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while uploading an array of files\",\n\t\t);\n\t}\n};\n","import type {\n\tPinataConfig,\n\tUploadResponse,\n\tUploadOptions,\n\tJsonBody,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const uploadJson = async <T extends JsonBody>(\n\tconfig: PinataConfig | undefined,\n\tjsonData: T,\n\tnetwork: \"public\" | \"private\",\n\toptions?: UploadOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config?.pinataJwt;\n\n\tconst json = JSON.stringify(jsonData);\n\tconst blob = new Blob([json]);\n\tconst file = new File([blob], \"data.json\", { type: \"application/json\" });\n\n\tconst data = new FormData();\n\tdata.append(\"file\", file, file.name);\n\tdata.append(\"network\", network);\n\tdata.append(\"name\", options?.metadata?.name || file.name || \"File from SDK\");\n\tif (options?.groupId) {\n\t\tdata.append(\"group_id\", options.groupId);\n\t}\n\tif (options?.metadata?.keyvalues) {\n\t\tdata.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\tSource: \"sdk/json\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tif (options?.url) {\n\t\ttry {\n\t\t\tconst request = await fetch(options.url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: data,\n\t\t\t});\n\n\t\t\tif (!request.ok) {\n\t\t\t\tconst errorData = await request.text();\n\t\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\trequest.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst res = await request.json();\n\t\t\tconst resData: UploadResponse = res.data;\n\t\t\treturn resData;\n\t\t} catch (error) {\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow new PinataError(`Error processing base64: ${error.message}`);\n\t\t\t}\n\t\t\tthrow new PinataError(\n\t\t\t\t\"An unknown error occurred while trying to upload base64\",\n\t\t\t);\n\t\t}\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: UploadResponse = res.data;\n\t\tif (options?.vectorize) {\n\t\t\tconst vectorReq = await fetch(\n\t\t\t\t`${endpoint}/vectorize/files/${resData.id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (vectorReq.ok) {\n\t\t\t\tresData.vectorized = true;\n\t\t\t\treturn resData;\n\t\t\t} else {\n\t\t\t\tconst errorData = await vectorReq.text();\n\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t`HTTP error during vectorization: ${errorData}`,\n\t\t\t\t\tvectorReq.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing json: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while uploading json\");\n\t}\n};\n","import type { PinataConfig, UploadResponse, UploadOptions } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const uploadUrl = async (\n\tconfig: PinataConfig | undefined,\n\turl: string,\n\tnetwork: \"public\" | \"private\",\n\toptions?: UploadOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config?.pinataJwt;\n\tconst data = new FormData();\n\n\tconst stream = await fetch(url);\n\n\tif (!stream.ok) {\n\t\tconst errorData = await stream.text();\n\t\tthrow new NetworkError(`HTTP error: ${errorData}`, stream.status, {\n\t\t\terror: errorData,\n\t\t\tcode: \"HTTP_ERROR\",\n\t\t\tmetadata: {\n\t\t\t\trequestUrl: stream.url,\n\t\t\t},\n\t\t});\n\t}\n\n\tconst arrayBuffer = await stream.arrayBuffer();\n\n\tconst blob = new Blob([arrayBuffer]);\n\n\tconst name = options?.metadata?.name ?? \"url_upload\";\n\n\tconst file = new File([blob], name);\n\n\tdata.append(\"file\", file, name);\n\tdata.append(\"network\", network);\n\tdata.append(\"name\", name);\n\tif (options?.groupId) {\n\t\tdata.append(\"group_id\", options.groupId);\n\t}\n\n\tif (options?.metadata?.keyvalues) {\n\t\tdata.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\tSource: \"sdk/url\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://uploads.pinata.cloud/v3\";\n\n\tif (config.uploadUrl) {\n\t\tendpoint = config.uploadUrl;\n\t}\n\n\tif (options?.url) {\n\t\ttry {\n\t\t\tconst request = await fetch(options.url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: data,\n\t\t\t});\n\n\t\t\tif (!request.ok) {\n\t\t\t\tconst errorData = await request.text();\n\t\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\t\trequest.status,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\t\terror: errorData,\n\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst res = await request.json();\n\t\t\tconst resData: UploadResponse = res.data;\n\t\t\treturn resData;\n\t\t} catch (error) {\n\t\t\tif (error instanceof PinataError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow new PinataError(`Error processing base64: ${error.message}`);\n\t\t\t}\n\t\t\tthrow new PinataError(\n\t\t\t\t\"An unknown error occurred while trying to upload base64\",\n\t\t\t);\n\t\t}\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: UploadResponse = res.data;\n\t\tif (options?.vectorize) {\n\t\t\tconst vectorReq = await fetch(\n\t\t\t\t`${endpoint}/vectorize/files/${resData.id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (vectorReq.ok) {\n\t\t\t\tresData.vectorized = true;\n\t\t\t\treturn resData;\n\t\t\t} else {\n\t\t\t\tconst errorData = await vectorReq.text();\n\t\t\t\tthrow new NetworkError(\n\t\t\t\t\t`HTTP error during vectorization: ${errorData}`,\n\t\t\t\t\tvectorReq.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing url: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while uploading by url\");\n\t}\n};\n","import type {\n\tPinataConfig,\n\tPinByCIDResponse,\n\tUploadCIDOptions,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const uploadCid = async (\n\tconfig: PinataConfig | undefined,\n\tcid: string,\n\toptions?: UploadCIDOptions,\n) => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst jwt: string | undefined = options?.keys || config?.pinataJwt;\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${jwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/cid\",\n\t\t};\n\t}\n\n\tconst requestBody: Record<string, any> = {\n\t\tcid: cid,\n\t\tname: options?.metadata ? options?.metadata?.name : cid,\n\t\tkeyvalues: options?.metadata?.keyvalues,\n\t\tgroup_id: options?.groupId,\n\t\thost_nodes: options?.peerAddresses,\n\t};\n\n\tconst data = JSON.stringify(requestBody);\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/public/pin_by_cid`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: data,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: PinByCIDResponse = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing cid: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\"An unknown error occurred while pinning by CID\");\n\t}\n};\n","import { PinataConfig } from \"../core/types\";\n\nexport const formatConfig = (config: PinataConfig | undefined) => {\n\tlet gateway = config?.pinataGateway;\n\tif (config && gateway) {\n\t\tif (gateway && !gateway.startsWith(\"https://\")) {\n\t\t\tgateway = `https://${gateway}`;\n\t\t}\n\t\tconfig.pinataGateway = gateway;\n\t}\n\treturn config;\n};\n","import type { PinataConfig } from \"../../types/\";\nimport {\n\tAnalyticsRequests,\n\tAnalyticsBandwidth,\n\tTimeIntervalAnalyticsBuilder,\n} from \"./\";\nimport { formatConfig } from \"../../../utils/format-config\";\n\nexport class Analytics {\n\tconfig: PinataConfig | undefined;\n\trequests: AnalyticsRequests;\n\tbandwidth: AnalyticsBandwidth;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.requests = new AnalyticsRequests(this.config);\n\t\tthis.bandwidth = new AnalyticsBandwidth(this.config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t\tthis.requests.updateConfig(newConfig);\n\t\tthis.bandwidth.updateConfig(newConfig);\n\t}\n\n\tsummary(options: {\n\t\tdomain: string;\n\t\tstart: string;\n\t\tend: string;\n\t\tinterval: \"day\" | \"week\";\n\t}): TimeIntervalAnalyticsBuilder {\n\t\treturn new TimeIntervalAnalyticsBuilder(\n\t\t\tthis.config,\n\t\t\toptions.domain,\n\t\t\toptions.start,\n\t\t\toptions.end,\n\t\t\toptions.interval,\n\t\t);\n\t}\n}\n","export const calculateDates = (\n\tdays: number,\n): { start: string; end: string } => {\n\tconst end = new Date();\n\tconst start = new Date();\n\tstart.setDate(start.getDate() - days);\n\n\t// Format dates to ISO string and trim time portion\n\treturn {\n\t\tstart: start.toISOString().split(\"T\")[0],\n\t\tend: end.toISOString().split(\"T\")[0],\n\t};\n};\n","import {\n\tPinataConfig,\n\tTopAnalyticsQuery,\n\tTopAnalyticsResponse,\n} from \"../../types\";\nimport { analyticsTopUsage } from \"../../functions\";\nimport { calculateDates } from \"./utils\";\n\nexport class AnalyticsFilter {\n\tprotected config: PinataConfig | undefined;\n\tprotected query: TopAnalyticsQuery;\n\n\tconstructor(\n\t\tconfig: PinataConfig | undefined,\n\t\tdomain: string,\n\t\tstart: string,\n\t\tend: string,\n\t) {\n\t\tthis.config = config;\n\t\tthis.query = {\n\t\t\tgateway_domain: domain,\n\t\t\tstart_date: start,\n\t\t\tend_date: end,\n\t\t\tsort_by: \"requests\", // Will be overridden in child classes\n\t\t\tattribute: \"cid\",\n\t\t};\n\t}\n\n\tcid(cid?: string): this {\n\t\tthis.query.attribute = \"cid\";\n\t\tif (cid) {\n\t\t\tthis.query.cid = cid;\n\t\t}\n\t\treturn this;\n\t}\n\n\tfileName(fileName?: string): this {\n\t\tthis.query.attribute = \"file_name\";\n\t\tif (fileName) {\n\t\t\tthis.query.file_name = fileName;\n\t\t}\n\t\treturn this;\n\t}\n\n\tuserAgent(userAgent?: string): this {\n\t\tthis.query.attribute = \"user_agent\";\n\t\tif (userAgent) {\n\t\t\tthis.query.user_agent = userAgent;\n\t\t}\n\t\treturn this;\n\t}\n\n\tcountry(country?: string): this {\n\t\tthis.query.attribute = \"country\";\n\t\tif (country) {\n\t\t\tthis.query.country = country;\n\t\t}\n\t\treturn this;\n\t}\n\n\tregion(region?: string): this {\n\t\tthis.query.attribute = \"region\";\n\t\tif (region) {\n\t\t\tthis.query.region = region;\n\t\t}\n\t\treturn this;\n\t}\n\n\treferer(referer?: string): this {\n\t\tthis.query.attribute = \"referer\";\n\t\tif (referer) {\n\t\t\tthis.query.referer = referer;\n\t\t}\n\t\treturn this;\n\t}\n\n\tlimit(limit: number): this {\n\t\tthis.query.limit = limit;\n\t\treturn this;\n\t}\n\n\tsort(order: \"asc\" | \"desc\"): this {\n\t\tthis.query.sort_order = order;\n\t\treturn this;\n\t}\n\n\tdays(numberOfDays: number): this {\n\t\tconst { start, end } = calculateDates(numberOfDays);\n\t\tthis.query.start_date = start;\n\t\tthis.query.end_date = end;\n\t\treturn this;\n\t}\n\n\tthen(\n\t\tonfulfilled?: ((value: TopAnalyticsResponse) => any) | null,\n\t): Promise<any> {\n\t\treturn analyticsTopUsage(this.config, this.query).then(onfulfilled);\n\t}\n}\n","import type { PinataConfig } from \"../../types\";\nimport { AnalyticsFilter } from \"./AnalyticsFilter\";\n\nexport class AnalyticsBandwidth extends AnalyticsFilter {\n\tconstructor(config?: PinataConfig) {\n\t\tsuper(config, \"\", \"\", \"\"); // These will need to be set through methods\n\t\tthis.query.sort_by = \"bandwidth\";\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tcustomDates(start?: string, end?: string): this {\n\t\tif (start) this.query.start_date = start;\n\t\tif (end) this.query.end_date = end;\n\t\treturn this;\n\t}\n\n\tfrom(domain: string): this {\n\t\tthis.query.gateway_domain = domain;\n\t\treturn this;\n\t}\n}\n","import type { AnalyticsQuery, PinataConfig } from \"../../types\";\n\nexport class AnalyticsBuilder<T extends AnalyticsQuery, R> {\n\tprotected config: PinataConfig | undefined;\n\tprotected query: T;\n\tprivate requestCount = 0;\n\tprivate lastRequestTime = 0;\n\tprivate readonly MAX_REQUESTS_PER_MINUTE = 30;\n\tprivate readonly MINUTE_IN_MS = 60000;\n\n\tconstructor(config: PinataConfig | undefined, query: T) {\n\t\tthis.config = config;\n\t\tthis.query = query;\n\t}\n\n\tcid(cid: string): this {\n\t\tthis.query.cid = cid;\n\t\treturn this;\n\t}\n\n\tfileName(fileName: string): this {\n\t\tthis.query.file_name = fileName;\n\t\treturn this;\n\t}\n\n\tuserAgent(userAgent: string): this {\n\t\tthis.query.user_agent = userAgent;\n\t\treturn this;\n\t}\n\n\tcountry(country: string): this {\n\t\tthis.query.country = country;\n\t\treturn this;\n\t}\n\n\tregion(region: string): this {\n\t\tthis.query.region = region;\n\t\treturn this;\n\t}\n\n\treferer(referer: string): this {\n\t\tthis.query.referer = referer;\n\t\treturn this;\n\t}\n\n\tlimit(limit: number): this {\n\t\tthis.query.limit = limit;\n\t\treturn this;\n\t}\n\n\tsort(order: \"asc\" | \"desc\"): this {\n\t\tthis.query.sort_order = order;\n\t\treturn this;\n\t}\n\n\t// private async rateLimit(): Promise<void> {\n\t// \tthis.requestCount++;\n\t// \tconst now = Date.now();\n\t// \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n\t// \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n\t// \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n\t// \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n\t// \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n\t// \t\t}\n\t// \t\tthis.requestCount = 0;\n\t// \t}\n\t// \tthis.lastRequestTime = Date.now();\n\t// }\n\n\tprotected async getAnalytics(): Promise<R> {\n\t\t//await this.rateLimit();\n\t\tthrow new Error(\"getAnalytics method must be implemented in derived class\");\n\t}\n\n\tthen(onfulfilled?: ((value: R) => any) | null): Promise<any> {\n\t\treturn this.getAnalytics().then(onfulfilled);\n\t}\n}\n","import { PinataConfig } from \"../../types\";\nimport { AnalyticsFilter } from \"./AnalyticsFilter\";\n\nexport class AnalyticsRequests extends AnalyticsFilter {\n\tconstructor(config?: PinataConfig) {\n\t\tsuper(config, \"\", \"\", \"\"); // These will need to be set through methods\n\t\tthis.query.sort_by = \"requests\";\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tcustomDates(start?: string, end?: string): this {\n\t\tif (start) this.query.start_date = start;\n\t\tif (end) this.query.end_date = end;\n\t\treturn this;\n\t}\n\n\tfrom(domain: string): this {\n\t\tthis.query.gateway_domain = domain;\n\t\treturn this;\n\t}\n}\n","import { AnalyticsBuilder } from \"./AnalyticsBuilder\";\nimport {\n\tTimeIntervalAnalyticsQuery,\n\tTimeIntervalAnalyticsResponse,\n\tPinataConfig,\n} from \"../../types\";\nimport { analyticsDateInterval } from \"../../functions\";\n\nexport class TimeIntervalAnalyticsBuilder extends AnalyticsBuilder<\n\tTimeIntervalAnalyticsQuery,\n\tTimeIntervalAnalyticsResponse\n> {\n\tconstructor(\n\t\tconfig: PinataConfig | undefined,\n\t\tdomain: string,\n\t\tstart: string,\n\t\tend: string,\n\t\tdateInterval: \"day\" | \"week\",\n\t) {\n\t\tsuper(config, {\n\t\t\tgateway_domain: domain,\n\t\t\tstart_date: start,\n\t\t\tend_date: end,\n\t\t\tdate_interval: dateInterval,\n\t\t});\n\t}\n\n\tsortBy(sortBy: \"requests\" | \"bandwidth\"): this {\n\t\tthis.query.sort_by = sortBy;\n\t\treturn this;\n\t}\n\n\tprotected async getAnalytics(): Promise<TimeIntervalAnalyticsResponse> {\n\t\treturn analyticsDateInterval(this.config, this.query);\n\t}\n\n\tasync all(): Promise<TimeIntervalAnalyticsResponse> {\n\t\treturn this.getAnalytics();\n\t}\n}\n","import type {\n\tPinataConfig,\n\tGroupQueryOptions,\n\tGroupListResponse,\n\tGroupResponseItem,\n} from \"../../types\";\nimport { listGroups } from \"../../functions\";\n\nexport class FilterGroups {\n\tprivate config: PinataConfig | undefined;\n\tprivate query: GroupQueryOptions = {};\n\tprivate privacy: \"private\" | \"public\";\n\t// rate limit vars\n\t// private requestCount = 0;\n\t// private lastRequestTime = 0;\n\t// private readonly MAX_REQUESTS_PER_MINUTE = 30;\n\t// private readonly MINUTE_IN_MS = 60000;\n\tprivate nextPageToken: string | undefined;\n\n\tconstructor(config: PinataConfig | undefined, privacy: \"private\" | \"public\") {\n\t\tthis.config = config;\n\t\tthis.privacy = privacy;\n\t}\n\n\tname(name: string): FilterGroups {\n\t\tthis.query.name = name;\n\t\treturn this;\n\t}\n\n\tlimit(limit: number): FilterGroups {\n\t\tthis.query.limit = limit;\n\t\treturn this;\n\t}\n\n\tisPublic(isPublic: boolean): FilterGroups {\n\t\tthis.query.isPublic = isPublic;\n\t\treturn this;\n\t}\n\n\tpageToken(pageToken: string): FilterGroups {\n\t\tthis.query.pageToken = pageToken;\n\t\treturn this;\n\t}\n\n\tthen(\n\t\tonfulfilled?: ((value: GroupListResponse) => any) | null,\n\t): Promise<GroupListResponse> {\n\t\treturn this.fetchPage()\n\t\t\t.then((response) => {\n\t\t\t\tthis.nextPageToken = response.next_page_token;\n\t\t\t\treturn response;\n\t\t\t})\n\t\t\t.then(onfulfilled);\n\t}\n\n\tprivate async fetchPage(): Promise<GroupListResponse> {\n\t\tif (this.nextPageToken) {\n\t\t\tthis.query.pageToken = this.nextPageToken;\n\t\t}\n\t\treturn listGroups(this.config, this.privacy, this.query);\n\t}\n\n\t// rate limit, hopefully temporary?\n\t// private async rateLimit(): Promise<void> {\n\t// \tthis.requestCount++;\n\t// \tconst now = Date.now();\n\t// \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n\t// \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n\t// \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n\t// \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n\t// \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n\t// \t\t}\n\t// \t\tthis.requestCount = 0;\n\t// \t}\n\t// \tthis.lastRequestTime = Date.now();\n\t// }\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<\n\t\tGroupResponseItem,\n\t\tvoid,\n\t\tunknown\n\t> {\n\t\twhile (true) {\n\t\t\tconst response = await this.fetchPage();\n\t\t\tfor (const item of response.groups) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t\tif (!response.next_page_token) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.nextPageToken = response.next_page_token;\n\t\t}\n\t}\n\n\tasync all(): Promise<GroupResponseItem[]> {\n\t\tconst allItems: GroupResponseItem[] = [];\n\t\tfor await (const item of this) {\n\t\t\tallItems.push(item);\n\t\t}\n\t\treturn allItems;\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\taddToGroup,\n\tcreateGroup,\n\tdeleteGroup,\n\tgetGroup,\n\tremoveFromGroup,\n\tupdateGroup,\n} from \"../../functions\";\nimport {\n\tGetGroupOptions,\n\tGroupCIDOptions,\n\tGroupOptions,\n\tGroupResponseItem,\n\tPinataConfig,\n\tUpdateGroupFilesResponse,\n\tUpdateGroupOptions,\n} from \"../../types\";\nimport { FilterGroups } from \"./GroupsFilter\";\n\nexport class PublicGroups {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tcreate(options: GroupOptions): Promise<GroupResponseItem> {\n\t\treturn createGroup(this.config, options, \"public\");\n\t}\n\n\tlist(): FilterGroups {\n\t\treturn new FilterGroups(this.config, \"public\");\n\t}\n\n\tget(options: GetGroupOptions): Promise<GroupResponseItem> {\n\t\treturn getGroup(this.config, options, \"public\");\n\t}\n\n\taddFiles(options: GroupCIDOptions): Promise<UpdateGroupFilesResponse[]> {\n\t\treturn addToGroup(this.config, options, \"public\");\n\t}\n\n\tremoveFiles(options: GroupCIDOptions): Promise<UpdateGroupFilesResponse[]> {\n\t\treturn removeFromGroup(this.config, options, \"public\");\n\t}\n\n\tupdate(options: UpdateGroupOptions): Promise<GroupResponseItem> {\n\t\treturn updateGroup(this.config, options, \"public\");\n\t}\n\n\tdelete(options: GetGroupOptions): Promise<string> {\n\t\treturn deleteGroup(this.config, options, \"public\");\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\taddToGroup,\n\tcreateGroup,\n\tdeleteGroup,\n\tgetGroup,\n\tremoveFromGroup,\n\tupdateGroup,\n} from \"../../functions\";\nimport {\n\tGetGroupOptions,\n\tGroupCIDOptions,\n\tGroupOptions,\n\tGroupResponseItem,\n\tPinataConfig,\n\tUpdateGroupFilesResponse,\n\tUpdateGroupOptions,\n} from \"../../types\";\nimport { FilterGroups } from \"./GroupsFilter\";\n\nexport class PrivateGroups {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tcreate(options: GroupOptions): Promise<GroupResponseItem> {\n\t\treturn createGroup(this.config, options, \"private\");\n\t}\n\n\tlist(): FilterGroups {\n\t\treturn new FilterGroups(this.config, \"private\");\n\t}\n\n\tget(options: GetGroupOptions): Promise<GroupResponseItem> {\n\t\treturn getGroup(this.config, options, \"private\");\n\t}\n\n\taddFiles(options: GroupCIDOptions): Promise<UpdateGroupFilesResponse[]> {\n\t\treturn addToGroup(this.config, options, \"private\");\n\t}\n\n\tremoveFiles(options: GroupCIDOptions): Promise<UpdateGroupFilesResponse[]> {\n\t\treturn removeFromGroup(this.config, options, \"private\");\n\t}\n\n\tupdate(options: UpdateGroupOptions): Promise<GroupResponseItem> {\n\t\treturn updateGroup(this.config, options, \"private\");\n\t}\n\n\tdelete(options: GetGroupOptions): Promise<string> {\n\t\treturn deleteGroup(this.config, options, \"private\");\n\t}\n}\n","import type { PinataConfig } from \"../../types\";\nimport { formatConfig } from \"../../../utils/format-config\";\nimport { PublicGroups } from \"./PublicGroups\";\nimport { PrivateGroups } from \"./PrivateGroups\";\n\nexport class Groups {\n\tconfig: PinataConfig | undefined;\n\tpublic: PublicGroups;\n\tprivate: PrivateGroups;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.public = new PublicGroups(config);\n\t\tthis.private = new PrivateGroups(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n}\n","import { FilterKeys } from \"./\";\nimport type {\n\tPinataConfig,\n\tKeyOptions,\n\tKeyResponse,\n\tRevokeKeyResponse,\n} from \"../../types\";\nimport { formatConfig } from \"../../../utils/format-config\";\nimport { createKey, revokeKeys } from \"../../functions\";\n\nexport class Keys {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tcreate(options: KeyOptions): Promise<KeyResponse> {\n\t\treturn createKey(this.config, options);\n\t}\n\n\tlist(): FilterKeys {\n\t\treturn new FilterKeys(this.config);\n\t}\n\n\trevoke(keys: string[]): Promise<RevokeKeyResponse[]> {\n\t\treturn revokeKeys(this.config, keys);\n\t}\n}\n","import { listKeys } from \"../../functions\";\nimport type { PinataConfig, KeyListQuery, KeyListItem } from \"../../types\";\n\nexport class FilterKeys {\n\tprivate config: PinataConfig | undefined;\n\tprivate query: KeyListQuery = {};\n\t// rate limit vars\n\t// private requestCount = 0;\n\t// private lastRequestTime = 0;\n\t// private readonly MAX_REQUESTS_PER_MINUTE = 30;\n\t// private readonly MINUTE_IN_MS = 60000;\n\n\tconstructor(config: PinataConfig | undefined) {\n\t\tthis.config = config;\n\t}\n\n\toffset(offset: number): FilterKeys {\n\t\tthis.query.offset = offset;\n\t\treturn this;\n\t}\n\n\trevoked(revoked: boolean): FilterKeys {\n\t\tthis.query.revoked = revoked;\n\t\treturn this;\n\t}\n\n\tlimitedUse(limitedUse: boolean): FilterKeys {\n\t\tthis.query.limitedUse = limitedUse;\n\t\treturn this;\n\t}\n\n\texhausted(exhausted: boolean): FilterKeys {\n\t\tthis.query.exhausted = exhausted;\n\t\treturn this;\n\t}\n\n\tname(name: string): FilterKeys {\n\t\tthis.query.name = name;\n\t\treturn this;\n\t}\n\n\tthen(onfulfilled?: ((value: KeyListItem[]) => any) | null): Promise<any> {\n\t\treturn listKeys(this.config, this.query).then(onfulfilled);\n\t}\n\n\t// private async rateLimit(): Promise<void> {\n\t// \tthis.requestCount++;\n\t// \tconst now = Date.now();\n\t// \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n\t// \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n\t// \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n\t// \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n\t// \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n\t// \t\t}\n\t// \t\tthis.requestCount = 0;\n\t// \t}\n\t// \tthis.lastRequestTime = Date.now();\n\t// }\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<KeyListItem, void, unknown> {\n\t\tlet hasMore = true;\n\t\tlet offset = 0;\n\n\t\twhile (hasMore) {\n\t\t\t//await this.rateLimit(); // applying rate limit\n\t\t\tthis.query.offset = offset;\n\n\t\t\tconst items = await listKeys(this.config, this.query);\n\n\t\t\tfor (const item of items) {\n\t\t\t\tyield item;\n\t\t\t}\n\n\t\t\tif (items.length === 0) {\n\t\t\t\thasMore = false;\n\t\t\t} else {\n\t\t\t\toffset += items.length;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync all(): Promise<KeyListItem[]> {\n\t\tconst allItems: KeyListItem[] = [];\n\t\tfor await (const item of this) {\n\t\t\tallItems.push(item);\n\t\t}\n\t\treturn allItems;\n\t}\n}\n","import type { PinataConfig } from \"../../types\";\nimport { PublicGateways, PrivateGateways } from \"./\";\nimport { formatConfig } from \"../../../utils/format-config\";\n\nexport class Gateways {\n\tconfig: PinataConfig | undefined;\n\tpublic: PublicGateways;\n\tprivate: PrivateGateways;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.public = new PublicGateways(config);\n\t\tthis.private = new PrivateGateways(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n}\n","import {\n\tPinataConfig,\n\tAccessLinkOptions,\n\tOptimizeImageOptions,\n} from \"../../types\";\nimport { createAccessLink } from \"../../functions/gateway/createAccessLink\";\n\nexport class OptimizeImageCreateAccessLink {\n\tprivate config: PinataConfig | undefined;\n\tprivate urlOpts: AccessLinkOptions;\n\tprivate imgOpts: OptimizeImageOptions = {};\n\n\tconstructor(config: PinataConfig | undefined, urlOpts: AccessLinkOptions) {\n\t\tthis.config = config;\n\t\tthis.urlOpts = urlOpts;\n\t}\n\n\toptimizeImage(options: OptimizeImageOptions): OptimizeImageCreateAccessLink {\n\t\tthis.imgOpts = { ...this.imgOpts, ...options };\n\t\treturn this;\n\t}\n\n\tthen(onfulfilled?: ((value: string) => any) | null): Promise<any> {\n\t\treturn createAccessLink(this.config, this.urlOpts, this.imgOpts).then(\n\t\t\tonfulfilled,\n\t\t);\n\t}\n}\n","import type {\n\tPinataConfig,\n\tOptimizeImageOptions,\n\tGetCIDResponse,\n} from \"../../types\";\nimport { getCid } from \"../../functions\";\n\nexport class OptimizeImageGetCid {\n\tprivate config: PinataConfig | undefined;\n\tprivate cid: string;\n\tprivate gatewayType?: \"ipfs\" | \"files\";\n\tprivate options: OptimizeImageOptions = {};\n\n\tconstructor(\n\t\tconfig: PinataConfig | undefined,\n\t\tcid: string,\n\t\tgatewayType?: \"ipfs\" | \"files\",\n\t) {\n\t\tthis.config = config;\n\t\tthis.cid = cid;\n\t\tthis.gatewayType = gatewayType;\n\t}\n\n\toptimizeImage(options: OptimizeImageOptions): OptimizeImageGetCid {\n\t\tthis.options = { ...this.options, ...options };\n\t\treturn this;\n\t}\n\n\tthen(onfulfilled?: ((value: GetCIDResponse) => any) | null): Promise<any> {\n\t\treturn getCid(this.config, this.cid, this.gatewayType, this.options).then(\n\t\t\tonfulfilled,\n\t\t);\n\t}\n}\n","import type { PinataConfig, AccessLinkOptions } from \"../../types\";\nimport { OptimizeImageGetCid, OptimizeImageCreateAccessLink } from \"./\";\n\nexport class PrivateGateways {\n\tprivate config: PinataConfig | undefined;\n\n\tconstructor(config: PinataConfig | undefined) {\n\t\tthis.config = config;\n\t}\n\n\tget(cid: string): OptimizeImageGetCid {\n\t\treturn new OptimizeImageGetCid(this.config, cid, \"files\");\n\t}\n\n\tcreateAccessLink(options: AccessLinkOptions): OptimizeImageCreateAccessLink {\n\t\treturn new OptimizeImageCreateAccessLink(this.config, options);\n\t}\n}\n","import { convertIPFSUrl } from \"../../functions\";\nimport { PinataConfig } from \"../../types\";\nimport { OptimizeImageGetCid } from \"./\";\n\nexport class PublicGateways {\n\tprivate config: PinataConfig | undefined;\n\n\tconstructor(config: PinataConfig | undefined) {\n\t\tthis.config = config;\n\t}\n\n\tget(cid: string): OptimizeImageGetCid {\n\t\treturn new OptimizeImageGetCid(this.config, cid, \"ipfs\");\n\t}\n\n\tconvert(url: string, gatewayPrefix?: string): Promise<string> {\n\t\treturn convertIPFSUrl(this.config, url, gatewayPrefix);\n\t}\n}\n","import type { PinataConfig, FileListItem } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const getFile = async (\n\tconfig: PinataConfig | undefined,\n\tid: string,\n\tprivacy: \"public\" | \"private\",\n): Promise<FileListItem> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t...config.customHeaders,\n\t\t};\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/getFile\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(`${endpoint}/files/${privacy}/${id}`, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: headers,\n\t\t});\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\tconst resData: FileListItem = res.data;\n\t\treturn resData;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing getGroup: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while getting info for a group\",\n\t\t);\n\t}\n};\n","import {\n\tPinataConfig,\n\tFileListQuery,\n\tFileListResponse,\n\tFileListItem,\n} from \"../../types\";\nimport { listFiles } from \"../../functions\";\n\nexport class FilterFiles {\n\tprivate config: PinataConfig | undefined;\n\tprivate query: FileListQuery = {};\n\tprivate currentPageToken: string | undefined;\n\tprivate privacy: \"private\" | \"public\";\n\t// rate limit vars\n\t// private requestCount = 0;\n\t// private lastRequestTime = 0;\n\t// private readonly MAX_REQUESTS_PER_MINUTE = 30;\n\t// private readonly MINUTE_IN_MS = 60000;\n\n\tconstructor(config: PinataConfig | undefined, privacy: \"private\" | \"public\") {\n\t\tthis.config = config;\n\t\tthis.privacy = privacy;\n\t}\n\n\tname(name: string): FilterFiles {\n\t\tthis.query.name = name;\n\t\treturn this;\n\t}\n\n\tgroup(group: string): FilterFiles {\n\t\tthis.query.group = group;\n\t\treturn this;\n\t}\n\n\tcid(cid: string): FilterFiles {\n\t\tthis.query.cid = cid;\n\t\treturn this;\n\t}\n\n\tmimeType(mimeType: string): FilterFiles {\n\t\tthis.query.mimeType = mimeType;\n\t\treturn this;\n\t}\n\n\torder(order: \"ASC\" | \"DESC\"): FilterFiles {\n\t\tthis.query.order = order;\n\t\treturn this;\n\t}\n\n\tlimit(limit: number): FilterFiles {\n\t\tthis.query.limit = limit;\n\t\treturn this;\n\t}\n\n\tcidPending(cidPending: boolean): FilterFiles {\n\t\tthis.query.cidPending = cidPending;\n\t\treturn this;\n\t}\n\n\tkeyvalues(keyvalues: Record<string, string>): FilterFiles {\n\t\tthis.query.metadata = keyvalues;\n\t\treturn this;\n\t}\n\n\tnoGroup(noGroup: boolean): FilterFiles {\n\t\tthis.query.noGroup = noGroup;\n\t\treturn this;\n\t}\n\n\tpageToken(pageToken: string): FilterFiles {\n\t\tthis.query.pageToken = pageToken;\n\t\treturn this;\n\t}\n\n\tthen(onfulfilled?: ((value: FileListResponse) => any) | null): Promise<any> {\n\t\treturn this.fetchPage().then(onfulfilled);\n\t}\n\n\tprivate async fetchPage(): Promise<FileListResponse> {\n\t\tif (this.currentPageToken) {\n\t\t\tthis.query.pageToken = this.currentPageToken;\n\t\t}\n\t\tconst response = await listFiles(this.config, this.privacy, this.query);\n\t\tthis.currentPageToken = response.next_page_token;\n\t\treturn response;\n\t}\n\n\t// // rate limit, hopefully temporary?\n\t// private async rateLimit(): Promise<void> {\n\t// \tthis.requestCount++;\n\t// \tconst now = Date.now();\n\t// \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n\t// \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n\t// \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n\t// \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n\t// \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n\t// \t\t}\n\t// \t\tthis.requestCount = 0;\n\t// \t}\n\t// \tthis.lastRequestTime = Date.now();\n\t// }\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<FileListItem, void, unknown> {\n\t\twhile (true) {\n\t\t\tconst items = await this.fetchPage();\n\t\t\tfor (const item of items.files) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t\tif (!this.currentPageToken) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync all(): Promise<FileListItem[]> {\n\t\tconst allItems: FileListItem[] = [];\n\t\tfor await (const item of this) {\n\t\t\tallItems.push(item);\n\t\t}\n\t\treturn allItems;\n\t}\n}\n","import {\n\tPinQueueItem,\n\tPinQueueQuery,\n\tPinQueueResponse,\n\tPinataConfig,\n} from \"../../types\";\nimport { queue } from \"../../functions\";\n\nexport class FilterQueue {\n\tprivate config: PinataConfig | undefined;\n\tprivate query: PinQueueQuery = {};\n\tprivate currentPageToken: string | undefined;\n\t// rate limit vars\n\tprivate requestCount = 0;\n\tprivate lastRequestTime = 0;\n\tprivate readonly MAX_REQUESTS_PER_MINUTE = 30;\n\tprivate readonly MINUTE_IN_MS = 60000;\n\n\tconstructor(config: PinataConfig | undefined) {\n\t\tthis.config = config;\n\t}\n\n\tcid(cid: string): FilterQueue {\n\t\tthis.query.cid = cid;\n\t\treturn this;\n\t}\n\n\tstatus(\n\t\tstatus:\n\t\t\t| \"prechecking\"\n\t\t\t| \"retrieving\"\n\t\t\t| \"expired\"\n\t\t\t| \"backfilled\"\n\t\t\t| \"over_free_limit\"\n\t\t\t| \"over_max_size\"\n\t\t\t| \"invalid_object\"\n\t\t\t| \"bad_host_node\",\n\t): FilterQueue {\n\t\tthis.query.status = status;\n\t\treturn this;\n\t}\n\n\tpageLimit(limit: number): FilterQueue {\n\t\tthis.query.limit = limit;\n\t\treturn this;\n\t}\n\n\tpageToken(pageToken: string): FilterQueue {\n\t\tthis.query.pageToken = pageToken;\n\t\treturn this;\n\t}\n\n\tprivate async fetchPage(): Promise<PinQueueResponse> {\n\t\tif (this.currentPageToken) {\n\t\t\tthis.query.pageToken = this.currentPageToken;\n\t\t}\n\t\tconst response = await queue(this.config, this.query);\n\t\tthis.currentPageToken = response.next_page_token;\n\t\treturn response;\n\t}\n\n\tsort(sort: \"ASC\" | \"DSC\"): FilterQueue {\n\t\tthis.query.sort = sort;\n\t\treturn this;\n\t}\n\n\tthen(onfulfilled?: ((value: PinQueueResponse) => any) | null): Promise<any> {\n\t\treturn queue(this.config, this.query).then(onfulfilled);\n\t}\n\n\t// rate limit, hopefully temporary?\n\tprivate async rateLimit(): Promise<void> {\n\t\tthis.requestCount++;\n\t\tconst now = Date.now();\n\t\tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n\t\t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n\t\t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n\t\t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n\t\t\t}\n\t\t\tthis.requestCount = 0;\n\t\t}\n\t\tthis.lastRequestTime = Date.now();\n\t}\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<PinQueueItem, void, unknown> {\n\t\twhile (true) {\n\t\t\tconst items = await this.fetchPage();\n\t\t\tfor (const item of items.rows) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t\tif (!this.currentPageToken) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync all(): Promise<PinQueueItem[]> {\n\t\tconst allItems: PinQueueItem[] = [];\n\t\tfor await (const item of this) {\n\t\t\tallItems.push(item);\n\t\t}\n\t\treturn allItems;\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\tdeleteFile,\n\tupdateFile,\n\tswapCid,\n\tswapHistory,\n\tdeleteSwap,\n\tdeletePinRequest,\n} from \"../../functions\";\nimport { getFile } from \"../../functions/files/getFile\";\nimport {\n\tPinataConfig,\n\tDeleteResponse,\n\tUpdateFileOptions,\n\tFileListItem,\n\tSwapCidOptions,\n\tSwapCidResponse,\n\tSwapHistoryOptions,\n} from \"../../types\";\nimport { FilterFiles } from \"./FilterFiles\";\nimport { FilterQueue } from \"./FilterQueue\";\n\nexport class PublicFiles {\n\tprivate config: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tlist(): FilterFiles {\n\t\treturn new FilterFiles(this.config, \"public\");\n\t}\n\n\tget(id: string): Promise<FileListItem> {\n\t\treturn getFile(this.config, id, \"public\");\n\t}\n\n\tdelete(files: string[]): Promise<DeleteResponse[]> {\n\t\treturn deleteFile(this.config, files, \"public\");\n\t}\n\n\tupdate(options: UpdateFileOptions): Promise<FileListItem> {\n\t\treturn updateFile(this.config, options, \"public\");\n\t}\n\n\taddSwap(options: SwapCidOptions): Promise<SwapCidResponse> {\n\t\treturn swapCid(this.config, options, \"public\");\n\t}\n\n\tgetSwapHistory(options: SwapHistoryOptions): Promise<SwapCidResponse[]> {\n\t\treturn swapHistory(this.config, options, \"public\");\n\t}\n\n\tdeleteSwap(cid: string): Promise<string> {\n\t\treturn deleteSwap(this.config, cid, \"public\");\n\t}\n\n\tqueue(): FilterQueue {\n\t\treturn new FilterQueue(this.config);\n\t}\n\n\tdeletePinRequest(requestId: string): Promise<string> {\n\t\treturn deletePinRequest(this.config, requestId);\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\tdeleteFile,\n\tupdateFile,\n\tswapCid,\n\tswapHistory,\n\tdeleteSwap,\n\tvectorizeFile,\n\tvectorizeQuery,\n\tdeleteFileVectors,\n} from \"../../functions\";\nimport { getFile } from \"../../functions/files/getFile\";\nimport {\n\tPinataConfig,\n\tDeleteResponse,\n\tUpdateFileOptions,\n\tFileListItem,\n\tSwapCidOptions,\n\tSwapCidResponse,\n\tSwapHistoryOptions,\n\tVectorizeFileResponse,\n\tVectorizeQuery,\n\tVectorizeQueryResponse,\n\tGetCIDResponse,\n} from \"../../types\";\nimport { FilterFiles } from \"./FilterFiles\";\n\nexport class PrivateFiles {\n\tprivate config: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tlist(): FilterFiles {\n\t\treturn new FilterFiles(this.config, \"private\");\n\t}\n\n\tget(id: string): Promise<FileListItem> {\n\t\treturn getFile(this.config, id, \"private\");\n\t}\n\n\tdelete(files: string[]): Promise<DeleteResponse[]> {\n\t\treturn deleteFile(this.config, files, \"private\");\n\t}\n\n\tupdate(options: UpdateFileOptions): Promise<FileListItem> {\n\t\treturn updateFile(this.config, options, \"private\");\n\t}\n\n\taddSwap(options: SwapCidOptions): Promise<SwapCidResponse> {\n\t\treturn swapCid(this.config, options, \"private\");\n\t}\n\n\tgetSwapHistory(options: SwapHistoryOptions): Promise<SwapCidResponse[]> {\n\t\treturn swapHistory(this.config, options, \"private\");\n\t}\n\n\tdeleteSwap(cid: string): Promise<string> {\n\t\treturn deleteSwap(this.config, cid, \"private\");\n\t}\n\n\tvectorize(fileId: string): Promise<VectorizeFileResponse> {\n\t\treturn vectorizeFile(this.config, fileId);\n\t}\n\n\tqueryVectors(\n\t\toptions: VectorizeQuery,\n\t): Promise<VectorizeQueryResponse | GetCIDResponse> {\n\t\treturn vectorizeQuery(this.config, options);\n\t}\n\n\tdeleteVectors(fileId: string): Promise<VectorizeFileResponse> {\n\t\treturn deleteFileVectors(this.config, fileId);\n\t}\n}\n","import { PinataConfig } from \"../../types\";\n\nimport { formatConfig } from \"../../../utils/format-config\";\n\nimport { PublicFiles } from \"./PublicFiles\";\nimport { PrivateFiles } from \"./PrivateFiles\";\n\nexport class Files {\n\tconfig: PinataConfig | undefined;\n\tpublic: PublicFiles;\n\tprivate: PrivateFiles;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.public = new PublicFiles(config);\n\t\tthis.private = new PrivateFiles(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n}\n","import type { PinataConfig, PinataMetadata, UploadOptions } from \"../../types\";\n\nexport class UploadBuilder<T> {\n\tprivate config: PinataConfig | undefined;\n\tprivate uploadFunction: (\n\t\tconfig: PinataConfig | undefined,\n\t\t...args: any[]\n\t) => Promise<T>;\n\tprivate args: any[];\n\tprivate metadata: PinataMetadata | undefined = {};\n\tprivate keys: string | undefined;\n\tprivate groupId: string | undefined;\n\tprivate vector: boolean | undefined;\n\tprivate uploadUrl: string | undefined;\n\tprivate peerAddresses: string[] | undefined;\n\n\tconstructor(\n\t\tconfig: PinataConfig | undefined,\n\t\tuploadFunction: (\n\t\t\tconfig: PinataConfig | undefined,\n\t\t\t...args: any[]\n\t\t) => Promise<T>,\n\t\t...args: any[]\n\t) {\n\t\tthis.config = config;\n\t\tthis.uploadFunction = uploadFunction;\n\t\tthis.args = args;\n\t}\n\n\t// Replace addMetadata with these two methods:\n\tname(name: string): UploadBuilder<T> {\n\t\tif (!this.metadata) {\n\t\t\tthis.metadata = {};\n\t\t}\n\t\tthis.metadata.name = name;\n\t\treturn this;\n\t}\n\n\tkeyvalues(keyvalues: Record<string, string>): UploadBuilder<T> {\n\t\tif (!this.metadata) {\n\t\t\tthis.metadata = {};\n\t\t}\n\t\tthis.metadata.keyvalues = keyvalues;\n\t\treturn this;\n\t}\n\n\tkey(jwt: string): UploadBuilder<T> {\n\t\tthis.keys = jwt;\n\t\treturn this;\n\t}\n\n\tvectorize(): UploadBuilder<T> {\n\t\tthis.vector = true;\n\t\treturn this;\n\t}\n\n\turl(url: string): UploadBuilder<T> {\n\t\tthis.uploadUrl = url;\n\t\treturn this;\n\t}\n\n\t// cidVersion(v: 0 | 1): UploadBuilder<T> {\n\t// \tthis.version = v;\n\t// \treturn this;\n\t// }\n\n\tgroup(groupId: string): UploadBuilder<T> {\n\t\tthis.groupId = groupId;\n\t\treturn this;\n\t}\n\n\tpeerAddress(peerAddresses: string[]): UploadBuilder<T> {\n\t\tthis.peerAddresses = peerAddresses;\n\t\treturn this;\n\t}\n\n\tthen<TResult1 = T, TResult2 = never>(\n\t\tonfulfilled?:\n\t\t\t| ((value: T) => TResult1 | PromiseLike<TResult1>)\n\t\t\t| null\n\t\t\t| undefined,\n\t\tonrejected?:\n\t\t\t| ((reason: any) => TResult2 | PromiseLike<TResult2>)\n\t\t\t| null\n\t\t\t| undefined,\n\t): Promise<TResult1 | TResult2> {\n\t\tconst options: UploadOptions = this.args[this.args.length - 1] || {};\n\t\tif (this.metadata) {\n\t\t\toptions.metadata = this.metadata;\n\t\t}\n\t\tif (this.keys) {\n\t\t\toptions.keys = this.keys;\n\t\t}\n\t\tif (this.groupId) {\n\t\t\toptions.groupId = this.groupId;\n\t\t}\n\t\tif (this.vector) {\n\t\t\toptions.vectorize = this.vector;\n\t\t}\n\t\tif (this.uploadUrl) {\n\t\t\toptions.url = this.uploadUrl;\n\t\t}\n\t\tif (this.peerAddresses) {\n\t\t\toptions.peerAddresses = this.peerAddresses;\n\t\t}\n\t\tthis.args[this.args.length - 1] = options;\n\t\treturn this.uploadFunction(this.config, ...this.args).then(\n\t\t\tonfulfilled,\n\t\t\tonrejected,\n\t\t);\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\tcreateSignedUploadURL,\n\tuploadBase64,\n\tuploadFile,\n\tuploadFileArray,\n\tuploadJson,\n\tuploadUrl,\n} from \"../../functions\";\nimport { uploadCid } from \"../../functions/uploads/cid\";\nimport {\n\tFileObject,\n\tPinataConfig,\n\tSignedUploadUrlOptions,\n\tUploadOptions,\n\tUploadResponse,\n\tUploadCIDOptions,\n\tPinByCIDResponse,\n} from \"../../types\";\nimport { UploadBuilder } from \"./UploadBuilder\";\n\nexport class PublicUpload {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tfile(file: File, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, file, options) => uploadFile(config, file, \"public\", options),\n\t\t\tfile,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tfileArray(\n\t\tfiles: File[],\n\t\toptions?: UploadOptions,\n\t): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, file, options) =>\n\t\t\t\tuploadFileArray(config, file, \"public\", options),\n\t\t\tfiles,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tbase64(\n\t\tbase64String: string,\n\t\toptions?: UploadOptions,\n\t): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, base64String, options) =>\n\t\t\t\tuploadBase64(config, base64String, \"public\", options),\n\t\t\tbase64String,\n\t\t\toptions,\n\t\t);\n\t}\n\n\turl(url: string, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, url, options) => uploadUrl(config, url, \"public\", options),\n\t\t\turl,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tjson(data: object, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, data, options) => uploadJson(config, data, \"public\", options),\n\t\t\tdata,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tcid(\n\t\tcid: string,\n\t\toptions?: UploadCIDOptions,\n\t): UploadBuilder<PinByCIDResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, cid, options) => uploadCid(config, cid, options),\n\t\t\tcid,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tcreateSignedURL(options: SignedUploadUrlOptions): Promise<string> {\n\t\treturn createSignedUploadURL(this.config, options, \"public\");\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\tcreateSignedUploadURL,\n\tuploadBase64,\n\tuploadFile,\n\tuploadFileArray,\n\tuploadJson,\n\tuploadUrl,\n} from \"../../functions\";\nimport {\n\tFileObject,\n\tPinataConfig,\n\tSignedUploadUrlOptions,\n\tUploadOptions,\n\tUploadResponse,\n} from \"../../types\";\nimport { UploadBuilder } from \"./UploadBuilder\";\n\nexport class PrivateUpload {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tfile(file: File, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, file, options) => uploadFile(config, file, \"private\", options),\n\t\t\tfile,\n\t\t\toptions,\n\t\t);\n\t}\n\n\t// Reserved for future release\n\t// fileArray(\n\t// \tfiles: FileObject[],\n\t// \toptions?: UploadOptions,\n\t// ): UploadBuilder<UploadResponse> {\n\t// \treturn new UploadBuilder(\n\t// \t\tthis.config,\n\t// \t\t(config, file, options) =>\n\t// \t\t\tuploadFileArray(config, file, \"private\", options),\n\t// \t\tfiles,\n\t// \t\toptions,\n\t// \t);\n\t// }\n\n\tbase64(\n\t\tbase64String: string,\n\t\toptions?: UploadOptions,\n\t): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, base64String, options) =>\n\t\t\t\tuploadBase64(config, base64String, \"private\", options),\n\t\t\tbase64String,\n\t\t\toptions,\n\t\t);\n\t}\n\n\turl(url: string, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, url, options) => uploadUrl(config, url, \"private\", options),\n\t\t\turl,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tjson(data: object, options?: UploadOptions): UploadBuilder<UploadResponse> {\n\t\treturn new UploadBuilder(\n\t\t\tthis.config,\n\t\t\t(config, data, options) => uploadJson(config, data, \"private\", options),\n\t\t\tdata,\n\t\t\toptions,\n\t\t);\n\t}\n\n\tcreateSignedURL(options: SignedUploadUrlOptions): Promise<string> {\n\t\treturn createSignedUploadURL(this.config, options, \"private\");\n\t}\n}\n","import { PinataConfig } from \"../../types\";\nimport { formatConfig } from \"../../../utils/format-config\";\n\nimport { PublicUpload } from \"./PublicUpload\";\nimport { PrivateUpload } from \"./PrivateUpload\";\n\nexport class Upload {\n\tconfig: PinataConfig | undefined;\n\tpublic: PublicUpload;\n\tprivate: PrivateUpload;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.public = new PublicUpload(config);\n\t\tthis.private = new PrivateUpload(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n}\n","import type {\n\tSignatureOptions,\n\tPinataConfig,\n\tSignatureResponse,\n} from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const addSignature = async (\n\tconfig: PinataConfig | undefined,\n\toptions: SignatureOptions,\n\tnetwork: \"public\" | \"private\",\n): Promise<SignatureResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tconst data = JSON.stringify({\n\t\tsignature: options.signature,\n\t\taddress: options.address,\n\t});\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = { ...config.customHeaders };\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/addSignature\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/files/${network}/signature/${options.cid}`,\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: headers,\n\t\t\t\tbody: data,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (request.status === 403) {\n\t\t\t\tthrow new PinataError(\n\t\t\t\t\t\"Unauthorized signing, you must be the original owner of the file and it must not have a signature\",\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\treturn res.data;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing addSignature: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while adding signature to CID\",\n\t\t);\n\t}\n};\n","import type { PinataConfig, SignatureResponse } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const getSignature = async (\n\tconfig: PinataConfig | undefined,\n\tcid: string,\n\tnetwork: \"public\" | \"private\",\n): Promise<SignatureResponse> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = { ...config.customHeaders };\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/getSignature\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/files/${network}/signature/${cid}`,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst res = await request.json();\n\t\treturn res.data;\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing getSignature: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while fetching signature for CID\",\n\t\t);\n\t}\n};\n","import type { PinataConfig } from \"../../types\";\n\nimport {\n\tPinataError,\n\tNetworkError,\n\tAuthenticationError,\n\tValidationError,\n} from \"../../../utils/custom-errors\";\n\nexport const removeSignature = async (\n\tconfig: PinataConfig | undefined,\n\tcid: string,\n\tnetwork: \"public\" | \"private\",\n): Promise<string> => {\n\tif (!config) {\n\t\tthrow new ValidationError(\"Pinata configuration is missing\");\n\t}\n\n\tlet headers: Record<string, string>;\n\n\tif (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n\t\theaders = { ...config.customHeaders };\n\t} else {\n\t\theaders = {\n\t\t\tAuthorization: `Bearer ${config.pinataJwt}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tSource: \"sdk/removeSignature\",\n\t\t};\n\t}\n\n\tlet endpoint: string = \"https://api.pinata.cloud/v3\";\n\n\tif (config.endpointUrl) {\n\t\tendpoint = config.endpointUrl;\n\t}\n\n\ttry {\n\t\tconst request = await fetch(\n\t\t\t`${endpoint}/files/${network}/signature/${cid}`,\n\t\t\t{\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: headers,\n\t\t\t},\n\t\t);\n\n\t\tif (!request.ok) {\n\t\t\tconst errorData = await request.text();\n\t\t\tif (request.status === 401 || request.status === 403) {\n\t\t\t\tthrow new AuthenticationError(\n\t\t\t\t\t`Authentication failed: ${errorData}`,\n\t\t\t\t\trequest.status,\n\t\t\t\t\t{\n\t\t\t\t\t\terror: errorData,\n\t\t\t\t\t\tcode: \"AUTH_ERROR\",\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new NetworkError(`HTTP error: ${errorData}`, request.status, {\n\t\t\t\terror: errorData,\n\t\t\t\tcode: \"HTTP_ERROR\",\n\t\t\t\tmetadata: {\n\t\t\t\t\trequestUrl: request.url,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\treturn \"OK\";\n\t} catch (error) {\n\t\tif (error instanceof PinataError) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error instanceof Error) {\n\t\t\tthrow new PinataError(`Error processing addSignature: ${error.message}`);\n\t\t}\n\t\tthrow new PinataError(\n\t\t\t\"An unknown error occurred while adding signature to CID\",\n\t\t);\n\t}\n};\n","import { formatConfig } from \"../../../utils/format-config\";\nimport {\n\taddSignature,\n\tgetSignature,\n\tremoveSignature,\n} from \"../../functions/signatures\";\nimport { PinataConfig, SignatureOptions, SignatureResponse } from \"../../types\";\n\nexport class PublicSignatures {\n\tconfig: PinataConfig | undefined;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n\n\tadd(options: SignatureOptions): Promise<SignatureResponse> {\n\t\treturn addSignature(this.config, options, \"public\");\n\t}\n\n\tget(cid: string): Promise<SignatureResponse> {\n\t\treturn getSignature(this.config, cid, \"public\");\n\t}\n\n\tdelete(cid: string): Promise<string> {\n\t\treturn removeSignature(this.config, cid, \"public\");\n\t}\n}\n","import { formatConfig } from \"../../../utils/format-config\";\nimport { PinataConfig } from \"../../types\";\nimport { PrivateSignatures } from \"./PrivateSignatures\";\nimport { PublicSignatures } from \"./PublicSignatures\";\n\nexport class Signatures {\n\tconfig: PinataConfig | undefined;\n\tpublic: PublicSignatures;\n\t//private: PrivateSignatures\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.public = new PublicSignatures(config);\n\t\t// this.private = new PrivateSignatures(config)\n\t}\n\n\tupdateConfig(newConfig: PinataConfig): void {\n\t\tthis.config = newConfig;\n\t}\n}\n","import { testAuthentication } from \"./functions\";\nimport { formatConfig } from \"../utils\";\nimport {\n\tAnalytics,\n\tGroups,\n\tKeys,\n\tGateways,\n\tFiles,\n\tUpload,\n\tSignatures,\n} from \"./classes\";\nimport { PinataConfig } from \"./types\";\n\nexport class PinataSDK {\n\tconfig: PinataConfig | undefined;\n\tfiles: Files;\n\tupload: Upload;\n\tgateways: Gateways;\n\t//\tusage: Usage;\n\tkeys: Keys;\n\tgroups: Groups;\n\tanalytics: Analytics;\n\tsignatures: Signatures;\n\n\tconstructor(config?: PinataConfig) {\n\t\tthis.config = formatConfig(config);\n\t\tthis.files = new Files(this.config);\n\t\tthis.upload = new Upload(this.config);\n\t\tthis.gateways = new Gateways(this.config);\n\t\t//\t\tthis.usage = new Usage(this.config);\n\t\tthis.keys = new Keys(this.config);\n\t\tthis.groups = new Groups(this.config);\n\t\tthis.analytics = new Analytics(this.config);\n\t\tthis.signatures = new Signatures(this.config);\n\t}\n\n\tsetNewHeaders(headers: Record<string, string>): void {\n\t\tif (!this.config) {\n\t\t\tthis.config = { pinataJwt: \"\", customHeaders: {} };\n\t\t}\n\t\tthis.config.customHeaders = { ...this.config.customHeaders, ...headers };\n\n\t\t// Update headers for all sub-modules\n\t\tthis.files.updateConfig(this.config);\n\t\tthis.upload.updateConfig(this.config);\n\t\tthis.gateways.updateConfig(this.config);\n\t\t//\t\tthis.usage.updateConfig(this.config);\n\t\tthis.keys.updateConfig(this.config);\n\t\tthis.groups.updateConfig(this.config);\n\t\tthis.analytics.updateConfig(this.config);\n\t\tthis.signatures.updateConfig(this.config);\n\t}\n\n\tsetNewJwt(jwt: string): void {\n\t\tif (!this.config) {\n\t\t\tthis.config = { pinataJwt: \"\" };\n\t\t}\n\t\tthis.config.pinataJwt = jwt;\n\n\t\t// Update headers for all sub-modules\n\t\tthis.files.updateConfig(this.config);\n\t\tthis.upload.updateConfig(this.config);\n\t\tthis.gateways.updateConfig(this.config);\n\t\t//\t\tthis.usage.updateConfig(this.config);\n\t\tthis.keys.updateConfig(this.config);\n\t\tthis.groups.updateConfig(this.config);\n\t\tthis.analytics.updateConfig(this.config);\n\t\tthis.signatures.updateConfig(this.config);\n\t}\n\n\ttestAuthentication(): Promise<string> {\n\t\treturn testAuthentication(this.config);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACMO,IAAM,cAAN,cAA0B,MAAM;AAAA,EACtC,YACC,SACO,YACA,SACN;AACD,UAAM,OAAO;AAHN;AACA;AAGP,SAAK,OAAO;AAAA,EACb;AACD;AAEO,IAAM,eAAN,cAA2B,YAAY;AAAA,EAC7C,YAAY,SAAiB,YAAqB,SAAwB;AACzE,UAAM,SAAS,YAAY,OAAO;AAClC,SAAK,OAAO;AAAA,EACb;AACD;AAEO,IAAM,sBAAN,cAAkC,YAAY;AAAA,EACpD,YAAY,SAAiB,YAAqB,SAAwB;AACzE,UAAM,SAAS,YAAY,OAAO;AAClC,SAAK,OAAO;AAAA,EACb;AACD;AAEO,IAAM,kBAAN,cAA8B,YAAY;AAAA,EAChD,YAAY,SAAiB,SAAwB;AACpD,UAAM,SAAS,QAAW,OAAO;AACjC,SAAK,OAAO;AAAA,EACb;AACD;;;ACxBO,IAAM,wBAAwB,OACpC,QACA,YAC4C;AAC5C,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,IAAI;AAEJ,QAAI,IAAK,QAAO,OAAO,OAAO,GAAG;AACjC,QAAI,eAAgB,QAAO,OAAO,kBAAkB,cAAc;AAClE,QAAI,WAAY,QAAO,OAAO,cAAc,UAAU;AACtD,QAAI,SAAU,QAAO,OAAO,YAAY,QAAQ;AAChD,QAAI,UAAW,QAAO,OAAO,aAAa,SAAS;AACnD,QAAI,WAAY,QAAO,OAAO,cAAc,WAAW,SAAS,CAAC;AACjE,QAAI,QAAS,QAAO,OAAO,WAAW,QAAQ,SAAS,CAAC;AACxD,QAAI,OAAQ,QAAO,OAAO,UAAU,MAAM;AAC1C,QAAI,QAAS,QAAO,OAAO,WAAW,QAAQ,SAAS,CAAC;AACxD,QAAI,MAAO,QAAO,OAAO,SAAS,MAAM,SAAS,CAAC;AAClD,QAAI,WAAY,QAAO,OAAO,cAAc,UAAU;AACtD,QAAI,QAAS,QAAO,OAAO,WAAW,OAAO;AAC7C,QAAI,cAAe,QAAO,OAAO,MAAM,aAAa;AAAA,EACrD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,QAAM,MAAM,GAAG,QAAQ,uCAAuC,OAAO,SAAS,CAAC;AAE/E,MAAI;AACH,QAAI;AAEJ,QAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,gBAAU,EAAE,GAAG,OAAO,cAAc;AAAA,IACrC,OAAO;AACN,gBAAU;AAAA,QACT,eAAe,UAAU,OAAO,SAAS;AAAA,QACzC,QAAQ;AAAA,MACT;AAAA,IACD;AAEA,UAAM,UAAU,MAAM,MAAM,KAAK;AAAA,MAChC,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAAyC,IAAI;AACnD,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACzGO,IAAM,oBAAoB,OAChC,QACA,YACmC;AACnC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,IAAI;AAEJ,UAAM,SAAS,kBAAkB,OAAO;AACxC,QAAI,QAAQ;AAEX,YAAM,cAAc,OAAO,QAAQ,gBAAgB,EAAE;AACrD,aAAO,OAAO,kBAAkB,WAAW;AAAA,IAC5C;AACA,QAAI,KAAK;AACR,aAAO,OAAO,OAAO,GAAG;AAAA,IACzB;AACA,QAAI,WAAY,QAAO,OAAO,cAAc,UAAU;AACtD,QAAI,SAAU,QAAO,OAAO,YAAY,QAAQ;AAChD,QAAI,UAAW,QAAO,OAAO,aAAa,SAAS;AACnD,QAAI,WAAY,QAAO,OAAO,cAAc,WAAW,SAAS,CAAC;AACjE,QAAI,QAAS,QAAO,OAAO,WAAW,QAAQ,SAAS,CAAC;AACxD,QAAI,OAAQ,QAAO,OAAO,UAAU,MAAM;AAC1C,QAAI,QAAS,QAAO,OAAO,WAAW,QAAQ,SAAS,CAAC;AACxD,QAAI,MAAO,QAAO,OAAO,SAAS,MAAM,SAAS,CAAC;AAClD,QAAI,WAAY,QAAO,OAAO,cAAc,UAAU;AACtD,QAAI,QAAS,QAAO,OAAO,WAAW,OAAO;AAC7C,QAAI,UAAW,QAAO,OAAO,MAAM,SAAS;AAAA,EAC7C;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,QAAM,MAAM,GAAG,QAAQ,+BAA+B,OAAO,SAAS,CAAC;AAEvE,MAAI;AACH,QAAI;AAEJ,QAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,gBAAU,EAAE,GAAG,OAAO,cAAc;AAAA,IACrC,OAAO;AACN,gBAAU;AAAA,QACT,eAAe,UAAU,OAAO,SAAS;AAAA,QACzC,QAAQ;AAAA,MACT;AAAA,IACD;AAEA,UAAM,UAAU,MAAM,MAAM,KAAK;AAAA,MAChC,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAA4B,MAAM,QAAQ,KAAK;AACrD,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACrHO,IAAM,qBAAqB,OAAO,WAAqC;AAC7E,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AACJ,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,4BAA4B;AAAA,MAClE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAc,MAAM,QAAQ,KAAK;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACpEA,IAAM,OAAO,CAAC,iBAAwC;AACrD,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC/B,eAAW,SAAS,YAAY;AAAA,EACjC,CAAC;AACF;AAEO,IAAM,aAAa,OACzB,QACA,OACA,YAC+B;AAC/B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,YAA8B,CAAC;AAErC,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,aAAW,MAAM,OAAO;AACvB,QAAI;AACH,YAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,UAAU,OAAO,IAAI,EAAE,IAAI;AAAA,QAClE,QAAQ;AAAA,QACR;AAAA,MACD,CAAC;AAED,YAAM,KAAK,GAAG;AAEd,UAAI,CAAC,SAAS,IAAI;AACjB,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAI,SAAS,WAAW,KAAK;AAC5B,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,SAAS;AAAA,YACT;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,SAAS;AAAA,cACtB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,cAAc,SAAS,QAAQ;AAAA,UACrD,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,SAAS;AAAA,UACtB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ,SAAS;AAAA,MAClB,CAAC;AAAA,IACF,SAAS,OAAO;AACf,UAAI;AAEJ,UAAI,iBAAiB,aAAa;AACjC,uBAAe,MAAM;AAAA,MACtB,WAAW,iBAAiB,OAAO;AAClC,uBAAe,uBAAuB,EAAE,KAAK,MAAM,OAAO;AAAA,MAC3D,OAAO;AACN,uBAAe,iDAAiD,EAAE;AAAA,MACnE;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAAA,EACD;AACA,SAAO;AACR;;;AC5FO,IAAM,oBAAoB,OAChC,QACA,WACoC;AACpC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,oBAAoB,MAAM,IAAI;AAAA,MACpE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAA6B,MAAM,QAAQ,KAAK;AACtD,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;ACtEO,IAAM,aAAa,OACzB,QACA,KACA,YACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU,OAAO,SAAS,GAAG,IAAI;AAAA,MACvE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI,oBAAoB,yBAAyB,QAAQ,QAAQ;AAAA,UACtE,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI;AAAA,UACT;AAAA,UACA,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,UACP;AAAA,QACD;AAAA,MACD;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI,YAAY,6BAA6B,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AACA,YAAM,IAAI,aAAa,uBAAuB,QAAQ,QAAQ;AAAA,QAC7D,OAAO;AAAA,QACP,MAAM;AAAA,MACP,CAAC;AAAA,IACF;AAEA,WAAO,QAAQ;AAAA,EAChB,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,gCAAgC,MAAM,OAAO;AAAA,QAC7C;AAAA,QACA;AAAA,UACC,MAAM;AAAA,QACP;AAAA,MACD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,QACC,MAAM;AAAA,MACP;AAAA,IACD;AAAA,EACD;AACD;;;ACtFO,IAAM,YAAY,OACxB,QACA,SACA,YAC+B;AAC/B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,IAAI;AAEJ,QAAI,MAAO,QAAO,OAAO,SAAS,MAAM,SAAS,CAAC;AAClD,QAAI,KAAM,QAAO,OAAO,QAAQ,IAAI;AACpC,QAAI,MAAO,QAAO,OAAO,SAAS,KAAK;AACvC,QAAI,IAAK,QAAO,OAAO,OAAO,GAAG;AACjC,QAAI,SAAU,QAAO,OAAO,YAAY,QAAQ;AAChD,QAAI,MAAO,QAAO,OAAO,SAAS,KAAK;AACvC,QAAI,UAAW,QAAO,OAAO,aAAa,SAAS;AACnD,QAAI,WAAY,QAAO,OAAO,cAAc,MAAM;AAClD,QAAI,QAAS,QAAO,OAAO,SAAS,MAAM;AAC1C,QAAI,YAAY,OAAO,aAAa,UAAU;AAC7C,aAAO,QAAQ,QAAQ,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AAClD,eAAO,OAAO,aAAa,IAAI,SAAS,CAAC,KAAK,MAAM,SAAS,CAAC;AAAA,MAC/D,CAAC;AAAA,IACF;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,QAAM,MAAM,GAAG,QAAQ,UAAU,OAAO,IAAI,OAAO,SAAS,CAAC;AAE7D,MAAI;AACH,QAAI;AAEJ,QAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,gBAAU;AAAA,QACT,eAAe,UAAU,OAAO,SAAS;AAAA,QACzC,GAAG,OAAO;AAAA,MACX;AAAA,IACD,OAAO;AACN,gBAAU;AAAA,QACT,eAAe,UAAU,OAAO,SAAS;AAAA,QACzC,QAAQ;AAAA,MACT;AAAA,IACD;AAEA,UAAM,UAAU,MAAM,MAAM,KAAK;AAAA,MAChC,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA4B,IAAI;AACtC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,gCAAgC,MAAM,OAAO,EAAE;AAAA,IACtE;AACA,UAAM,IAAI,YAAY,+CAA+C;AAAA,EACtE;AACD;;;AC5GO,IAAM,kBAAkB,OAC9B,WACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,6BAA6B;AAAA,MACnE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AACA,UAAM,MAA8B,MAAM,QAAQ,KAAK;AACvD,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,qCAAqC,MAAM,OAAO;AAAA,MACnD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACjEO,IAAM,UAAU,OACtB,QACA,SACA,YAC8B;AAC9B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,OAAO,KAAK,UAAU;AAAA,IAC3B,UAAU,QAAQ;AAAA,EACnB,CAAC;AAED,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,UAAU,OAAO,SAAS,QAAQ,GAAG;AAAA,MAChD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,QACA,MAAM;AAAA,MACP;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI,YAAY,yBAAyB,QAAQ,QAAQ;AAAA,UAC9D,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI,YAAY,6BAA6B,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA2B,IAAI;AACrC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,8BAA8B,MAAM,OAAO,EAAE;AAAA,IACpE;AACA,UAAM,IAAI,YAAY,8CAA8C;AAAA,EACrE;AACD;;;ACnGO,IAAM,cAAc,OAC1B,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,UAAU,OAAO,SAAS,QAAQ,GAAG,WAAW,QAAQ,MAAM;AAAA,MACzE;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI,YAAY,6BAA6B,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA6B,IAAI;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,gCAAgC,MAAM,OAAO,EAAE;AAAA,IACtE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC5FO,IAAM,oBAAoB,OAChC,WACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU,EAAE,GAAG,OAAO,cAAc;AAAA,EACrC,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,6BAA6B;AAAA,MACnE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AACA,UAAM,MAA8B,MAAM,QAAQ,KAAK;AACvD,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,uCAAuC,MAAM,OAAO;AAAA,MACrD;AAAA,IACD;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC/DO,IAAM,aAAa,OACzB,QACA,SACA,YAC2B;AAC3B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MACC,CAAC,QAAQ,SACR,CAAC,QAAQ,aAAa,OAAO,KAAK,QAAQ,SAAS,EAAE,WAAW,IAChE;AACD,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AAEA,QAAM,OAA4B,CAAC;AAEnC,MAAI,QAAQ,SAAS,QAAW;AAC/B,SAAK,OAAO,QAAQ;AAAA,EACrB;AACA,MAAI,QAAQ,aAAa,OAAO,KAAK,QAAQ,SAAS,EAAE,SAAS,GAAG;AACnE,SAAK,YAAY,QAAQ;AAAA,EAC1B;AAEA,QAAM,OAAO,KAAK,UAAU,IAAI;AAEhC,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU,OAAO,IAAI,QAAQ,EAAE,IAAI;AAAA,MACzE,QAAQ;AAAA,MACR;AAAA,MACA;AAAA,IACD,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAAwB,IAAI;AAClC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,gCAAgC,MAAM,OAAO,EAAE;AAAA,IACtE;AACA,UAAM,IAAI,YAAY,+CAA+C;AAAA,EACtE;AACD;;;AClGO,IAAM,gBAAgB,OAC5B,QACA,WACoC;AACpC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,oBAAoB,MAAM,IAAI;AAAA,MACpE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAA6B,MAAM,QAAQ,KAAK;AACtD,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;AChEO,IAAM,iBAAiB,OAC7B,QACA,YACsD;AACtD,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,QAAM,OAAO,KAAK,UAAU;AAAA,IAC3B,MAAM,QAAQ;AAAA,EACf,CAAC;AAED,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,qBAAqB,QAAQ,OAAO;AAAA,MAC/C;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAAkC,IAAI;AAE5C,QAAI,QAAQ,YAAY;AACvB,UAAI,QAAQ,QAAQ,WAAW,GAAG;AACjC,cAAM,IAAI,YAAY,qCAAqC;AAAA,MAC5D;AACA,YAAM,MAAM,QAAQ,QAAQ,CAAC,EAAE;AAC/B,YAAM,UAA0B,MAAM,OAAO,QAAQ,KAAK,OAAO;AACjE,aAAO;AAAA,IACR;AAEA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,oCAAoC,MAAM,OAAO;AAAA,MAClD;AAAA,IACD;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;AC5FO,IAAM,QAAQ,OACpB,QACA,YAC+B;AAC/B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAAA,IAClC,eAAe;AAAA,EAChB,CAAC;AAED,MAAI,SAAS;AACZ,UAAM,EAAE,KAAK,QAAQ,MAAM,OAAO,UAAU,IAAI;AAEhD,QAAI,IAAK,QAAO,OAAO,OAAO,IAAI,SAAS,CAAC;AAC5C,QAAI,OAAQ,QAAO,OAAO,UAAU,OAAO,SAAS,CAAC;AACrD,QAAI,KAAM,QAAO,OAAO,QAAQ,KAAK,SAAS,CAAC;AAC/C,QAAI,MAAO,QAAO,OAAO,SAAS,MAAM,SAAS,CAAC;AAClD,QAAI,UAAW,QAAO,OAAO,aAAa,UAAU,SAAS,CAAC;AAAA,EAC/D;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,QAAM,MAAM,GAAG,QAAQ,4BAA4B,OAAO,SAAS,CAAC;AAEpE,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MAEzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,KAAK;AAAA,MAChC,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AACD,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AACA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA4B,IAAI;AACtC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,6BAA6B,MAAM,OAAO,EAAE;AAAA,IACnE;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;AC1FO,IAAM,mBAAmB,OAC/B,QACA,OACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,4BAA4B,EAAE,IAAI;AAAA,MACzE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AAED,QAAI,CAAC,SAAS,IAAI;AACjB,YAAM,YAAY,MAAM,SAAS,KAAK;AACtC,UAAI,SAAS,WAAW,KAAK;AAC5B,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,SAAS;AAAA,UACT;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,SAAS;AAAA,YACtB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,cAAc,SAAS,QAAQ;AAAA,QACrD,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,SAAS;AAAA,QACtB;AAAA,MACD,CAAC;AAAA,IACF;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,kCAAkC,MAAM,OAAO,EAAE;AAAA,IACxE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACjEO,IAAM,SAAS,OACrB,QACA,KACA,aACA,YAC6B;AAC7B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AACJ,MAAI,SAAiB,GAAG,QAAQ,aAAa,IAAI,WAAW,IAAI,GAAG;AAEnE,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,QAAI,QAAQ,MAAO,QAAO,OAAO,aAAa,QAAQ,MAAM,SAAS,CAAC;AACtE,QAAI,QAAQ,OAAQ,QAAO,OAAO,cAAc,QAAQ,OAAO,SAAS,CAAC;AACzE,QAAI,QAAQ,IAAK,QAAO,OAAO,WAAW,QAAQ,IAAI,SAAS,CAAC;AAChE,QAAI,QAAQ,IAAK,QAAO,OAAO,WAAW,QAAQ,GAAG;AACrD,QAAI,QAAQ,QAAS,QAAO,OAAO,eAAe,QAAQ,OAAO;AACjE,QAAI,QAAQ;AACX,aAAO,OAAO,eAAe,QAAQ,QAAQ,SAAS,CAAC;AACxD,QAAI,QAAQ,OAAQ,QAAO,OAAO,cAAc,QAAQ,MAAM;AAC9D,QAAI,QAAQ,cAAc;AACzB,aAAO,OAAO,YAAY,QAAQ,UAAU,SAAS,CAAC;AACvD,QAAI,QAAQ;AACX,aAAO,OAAO,eAAe,QAAQ,QAAQ,SAAS,CAAC;AACxD,QAAI,QAAQ,YAAY,KAAM,QAAO,OAAO,eAAe,UAAU;AACrE,QAAI,QAAQ,SAAU,QAAO,OAAO,gBAAgB,QAAQ,QAAQ;AAAA,EACrE;AAEA,MAAI,QAAQ,kBAAkB;AAC7B,WAAO,OAAO,sBAAsB,OAAO,gBAAgB;AAAA,EAC5D;AAEA,QAAM,cAAc,OAAO,SAAS;AACpC,MAAI,aAAa;AAChB,cAAU,IAAI,WAAW;AAAA,EAC1B;AAEA,MAAI,gBAAgB,QAAQ;AAC3B,UAAM,UAAU,MAAM,MAAM,MAAM;AAElC,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,cACL,QAAQ,QAAQ,IAAI,cAAc,GAAG,MAAM,GAAG,EAAE,CAAC,KAAK;AAEvD,QAAI,aAAa,SAAS,kBAAkB,GAAG;AAC9C,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B,WAAW,aAAa,SAAS,OAAO,GAAG;AAC1C,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B,OAAO;AACN,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B;AAEA,UAAM,MAAsB;AAAA,MAC3B;AAAA,MACA;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAEA,QAAM,OAAO,KAAK,OAAM,oBAAI,KAAK,GAAE,QAAQ,IAAI,GAAI;AAEnD,QAAM,UAAU,KAAK,UAAU;AAAA,IAC9B,KAAK;AAAA,IACL;AAAA,IACA,SAAS;AAAA,IACT,QAAQ;AAAA,EACT,CAAC;AAED,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,gBAAgB;AAAA,MAChB,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,mBAAmB,MAAM,MAAM,GAAG,QAAQ,eAAe;AAAA,IAC9D,QAAQ;AAAA,IACR;AAAA,IACA,MAAM;AAAA,EACP,CAAC;AAED,QAAM,YAAY,MAAM,iBAAiB,KAAK;AAE9C,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,UAAU,IAAI;AAE1C,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,cACL,QAAQ,QAAQ,IAAI,cAAc,GAAG,MAAM,GAAG,EAAE,CAAC,KAAK;AAEvD,QAAI,aAAa,SAAS,kBAAkB,GAAG;AAC9C,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B,WAAW,aAAa,SAAS,OAAO,GAAG;AAC1C,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B,OAAO;AACN,aAAO,MAAM,QAAQ,KAAK;AAAA,IAC3B;AAEA,UAAM,MAAsB;AAAA,MAC3B;AAAA,MACA;AAAA,IACD;AAEA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,IAClE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC/LA,SAAS,aAAa,KAAsB;AAE3C,SAAO,+BAA+B,KAAK,GAAG;AAC/C;AAEA,SAAS,aAAa,KAAsB;AAE3C,SAAO,mBAAmB,KAAK,GAAG;AACnC;AAEA,SAAS,MAAM,KAAsB;AAEpC,QAAM,IAAI,KAAK;AACf,SAAO,aAAa,GAAG,KAAK,aAAa,GAAG;AAC7C;AAEA,eAAsB,YAAY,OAA6C;AAC9E,MAAI,OAAO,UAAU,UAAU;AAC9B,UAAM,IAAI,MAAM,uBAAuB;AAAA,EACxC;AAGA,QAAM,gBAAgB,CAAC,QAAgB;AACtC,UAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,WAAO,MAAM,MAAM,CAAC,CAAC,IAAI,MAAM,CAAC,IAAI;AAAA,EACrC;AAGA,QAAM,YAAY,cAAc,KAAK;AACrC,MAAI,WAAW;AACd,WAAO;AAAA,MACN,aAAa;AAAA,MACb,KAAK;AAAA,IACN;AAAA,EACD;AAEA,MAAI;AACJ,MAAI;AAEH,UAAM,IAAI,IAAI,KAAK;AAAA,EACpB,SAAS,OAAO;AAEf,UAAM,QAAQ,MAAM,MAAM,OAAO;AACjC,eAAW,QAAQ,OAAO;AACzB,YAAM,MAAM,cAAc,IAAI;AAC9B,UAAI,KAAK;AACR,eAAO;AAAA,UACN,aAAa;AAAA,UACb;AAAA,QACD;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,MACN,aAAa;AAAA,MACb,KAAK;AAAA,IACN;AAAA,EACD;AAGA,QAAM,aAAa,IAAI,SAAS,MAAM,GAAG;AACzC,aAAW,aAAa,YAAY;AACnC,QAAI,MAAM,SAAS,GAAG;AACrB,aAAO;AAAA,QACN,aAAa;AAAA,QACb,KAAK;AAAA,MACN;AAAA,IACD;AAAA,EACD;AAGA,QAAM,YAAY,IAAI,SAAS,MAAM,GAAG;AACxC,aAAW,QAAQ,WAAW;AAC7B,UAAM,MAAM,cAAc,IAAI;AAC9B,QAAI,KAAK;AACR,aAAO;AAAA,QACN,aAAa;AAAA,QACb;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,SAAO;AAAA,IACN,aAAa;AAAA,IACb,KAAK;AAAA,EACN;AACD;AAEA,eAAsB,wBACrB,WACA,sBACC;AACD,QAAM,UAAU,MAAM,YAAY,SAAS;AAE3C,MAAI,QAAQ,gBAAgB,MAAM;AACjC,UAAM,IAAI,MAAM,0BAA0B;AAAA,EAC3C;AAEA,MAAI,CAAC,UAAU,WAAW,OAAO,KAAK,CAAC,UAAU,WAAW,SAAS,GAAG;AACvE,WAAO,GAAG,oBAAoB,SAAS,SAAS;AAAA,EACjD;AAEA,QAAM,SAAS,IAAI,IAAI,SAAS;AAChC,QAAM,OAAO,OAAO,WAAW,OAAO,SAAS,OAAO;AAGtD,MAAI,UAAU,WAAW,UAAU,QAAQ,GAAG,EAAE,GAAG;AAClD,WAAO,GAAG,oBAAoB,SAAS,QAAQ,GAAG,GAAG,IAAI;AAAA,EAC1D;AAGA,MAAI,UAAU,SAAS,SAAS,QAAQ,GAAG,EAAE,GAAG;AAC/C,WAAO,GAAG,oBAAoB,GAAG,IAAI;AAAA,EACtC;AAGA,MAAI,UAAU,SAAS,SAAS,QAAQ,GAAG,EAAE,GAAG;AAC/C,WAAO,GAAG,oBAAoB,GAAG,IAAI;AAAA,EACtC;AAGA,MAAI,OAAO,SAAS,SAAS,QAAQ,GAAI,GAAG;AAC3C,WAAO,GAAG,oBAAoB,SAAS,QAAQ,GAAG,GAAG,IAAI;AAAA,EAC1D;AAGA,QAAM,IAAI;AAAA,IACT;AAAA,EACD;AACD;;;AC/HO,IAAM,iBAAiB,OAC7B,QACA,KACA,kBACqB;AACrB,MAAI;AACJ,MAAI,SACH,iBAAiB,QAAQ,iBAAiB;AAC3C,WAAS,MAAM,wBAAwB,KAAK,MAAM;AAClD,MAAI,QAAQ,kBAAkB;AAC7B,OAAG,MAAM,uBAAuB,QAAQ,gBAAgB;AAAA,EACzD;AACA,SAAO;AACR;;;ACJO,IAAM,mBAAmB,OAC/B,QACA,SACA,YACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,SAAS,SAAS;AACrB,cAAU,QAAQ,QAAQ,WAAW,UAAU,IAC5C,QAAQ,UACR,WAAW,QAAQ,OAAO;AAAA,EAC9B,OAAO;AACN,cAAU,OAAO;AAAA,EAClB;AAEA,MAAI,SAAiB,GAAG,OAAO,UAAU,QAAQ,GAAG;AAEpD,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,QAAI,QAAQ,MAAO,QAAO,OAAO,aAAa,QAAQ,MAAM,SAAS,CAAC;AACtE,QAAI,QAAQ,OAAQ,QAAO,OAAO,cAAc,QAAQ,OAAO,SAAS,CAAC;AACzE,QAAI,QAAQ,IAAK,QAAO,OAAO,WAAW,QAAQ,IAAI,SAAS,CAAC;AAChE,QAAI,QAAQ,IAAK,QAAO,OAAO,WAAW,QAAQ,GAAG;AACrD,QAAI,QAAQ,QAAS,QAAO,OAAO,eAAe,QAAQ,OAAO;AACjE,QAAI,QAAQ;AACX,aAAO,OAAO,eAAe,QAAQ,QAAQ,SAAS,CAAC;AACxD,QAAI,QAAQ,OAAQ,QAAO,OAAO,cAAc,QAAQ,MAAM;AAC9D,QAAI,QAAQ,cAAc;AACzB,aAAO,OAAO,YAAY,QAAQ,UAAU,SAAS,CAAC;AACvD,QAAI,QAAQ;AACX,aAAO,OAAO,eAAe,QAAQ,QAAQ,SAAS,CAAC;AACxD,QAAI,QAAQ,YAAY,KAAM,QAAO,OAAO,eAAe,UAAU;AACrE,QAAI,QAAQ,SAAU,QAAO,OAAO,gBAAgB,QAAQ,QAAQ;AAAA,EACrE;AAEA,QAAM,cAAc,OAAO,SAAS;AAEpC,MAAI,aAAa;AAChB,cAAU,IAAI,WAAW;AAAA,EAC1B;AAEA,QAAM,OAAO,SAAS,QAAQ,KAAK,OAAM,oBAAI,KAAK,GAAE,QAAQ,IAAI,GAAI;AAEpE,QAAM,UAAU,KAAK,UAAU;AAAA,IAC9B,KAAK;AAAA,IACL;AAAA,IACA,SAAS,QAAQ;AAAA,IACjB,QAAQ;AAAA,EACT,CAAC;AAED,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,gBAAgB;AAAA,MAChB,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,gCAAgC;AAAA,MACtE,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,qCAAqC,MAAM,OAAO;AAAA,MACnD;AAAA,IACD;AACA,UAAM,IAAI,YAAY,oDAAoD;AAAA,EAC3E;AACD;;;ACxHO,IAAM,aAAa,OACzB,QACA,SACA,YACyC;AACzC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAMA,QAAO,CAAC,iBAAwC;AACrD,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC/B,iBAAW,SAAS,YAAY;AAAA,IACjC,CAAC;AAAA,EACF;AAEA,QAAM,YAAwC,CAAC;AAE/C,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,aAAW,MAAM,QAAQ,OAAO;AAC/B,QAAI;AACH,YAAM,WAAW,MAAM;AAAA,QACtB,GAAG,QAAQ,WAAW,OAAO,IAAI,QAAQ,OAAO,QAAQ,EAAE;AAAA,QAC1D;AAAA,UACC,QAAQ;AAAA,UACR;AAAA,QACD;AAAA,MACD;AAEA,YAAMA,MAAK,GAAG;AAEd,UAAI,CAAC,SAAS,IAAI;AACjB,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAI,SAAS,WAAW,KAAK;AAC5B,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,SAAS;AAAA,YACT;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,SAAS;AAAA,cACtB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,SAAS,QAAQ;AAAA,UACnE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,SAAS;AAAA,UACtB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ,SAAS;AAAA,MAClB,CAAC;AAAA,IACF,SAAS,OAAO;AACf,UAAI;AAEJ,UAAI,iBAAiB,aAAa;AACjC,uBAAe,MAAM;AAAA,MACtB,WAAW,iBAAiB,OAAO;AAClC,uBAAe,qBAAqB,EAAE,cAAc,MAAM,OAAO;AAAA,MAClE,OAAO;AACN,uBAAe,+CAA+C,EAAE;AAAA,MACjE;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAAA,EACD;AACA,SAAO;AACR;;;ACjGO,IAAM,cAAc,OAC1B,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,OAAO,KAAK,UAAU;AAAA,IAC3B,MAAM,QAAQ;AAAA,IACd,WAAW,QAAQ;AAAA,EACpB,CAAC;AAED,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,WAAW,OAAO,IAAI;AAAA,MAC5D,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA6B,IAAI;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,iCAAiC,MAAM,OAAO,EAAE;AAAA,IACvE;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;ACnFO,IAAM,cAAc,OAC1B,QACA,SACA,YACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,WAAW,OAAO,IAAI,QAAQ,OAAO;AAAA,MAChD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAc,QAAQ;AAC5B,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,iCAAiC,MAAM,OAAO,EAAE;AAAA,IACvE;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;ACvEO,IAAM,WAAW,OACvB,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,WAAW,OAAO,IAAI,QAAQ,OAAO;AAAA,MAChD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA6B,IAAI;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,8BAA8B,MAAM,OAAO,EAAE;AAAA,IACpE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC7EO,IAAM,aAAa,OACzB,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,UAAM,EAAE,WAAW,MAAM,OAAO,SAAS,IAAI;AAE7C,QAAI,UAAW,QAAO,OAAO,aAAa,UAAU,SAAS,CAAC;AAC9D,QAAI,SAAU,QAAO,OAAO,YAAY,SAAS,SAAS,CAAC;AAC3D,QAAI,KAAM,QAAO,OAAO,QAAQ,IAAI;AACpC,QAAI,UAAU,OAAW,QAAO,OAAO,SAAS,MAAM,SAAS,CAAC;AAAA,EACjE;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,WAAW,OAAO,IAAI,OAAO,SAAS,CAAC;AAAA,MAClD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA6B,IAAI;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,gCAAgC,MAAM,OAAO,EAAE;AAAA,IACtE;AACA,UAAM,IAAI,YAAY,gDAAgD;AAAA,EACvE;AACD;;;ACxFO,IAAM,kBAAkB,OAC9B,QACA,SACA,YACyC;AACzC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAMC,QAAO,CAAC,iBAAwC;AACrD,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC/B,iBAAW,SAAS,YAAY;AAAA,IACjC,CAAC;AAAA,EACF;AAEA,QAAM,YAAwC,CAAC;AAE/C,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,aAAW,MAAM,QAAQ,OAAO;AAC/B,QAAI;AACH,YAAM,WAAW,MAAM;AAAA,QACtB,GAAG,QAAQ,WAAW,OAAO,IAAI,QAAQ,OAAO,QAAQ,EAAE;AAAA,QAC1D;AAAA,UACC,QAAQ;AAAA,UACR;AAAA,QACD;AAAA,MACD;AAEA,YAAMA,MAAK,GAAG;AAEd,UAAI,CAAC,SAAS,IAAI;AACjB,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAI,SAAS,WAAW,KAAK;AAC5B,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,SAAS;AAAA,YACT;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,SAAS;AAAA,cACtB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,SAAS,QAAQ;AAAA,UACnE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,SAAS;AAAA,UACtB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ,SAAS;AAAA,MAClB,CAAC;AAAA,IACF,SAAS,OAAO;AACf,UAAI;AAEJ,UAAI,iBAAiB,aAAa;AACjC,uBAAe,MAAM;AAAA,MACtB,WAAW,iBAAiB,OAAO;AAClC,uBAAe,qBAAqB,EAAE,cAAc,MAAM,OAAO;AAAA,MAClE,OAAO;AACN,uBAAe,+CAA+C,EAAE;AAAA,MACjE;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAAA,EACD;AACA,SAAO;AACR;;;ACjGO,IAAM,cAAc,OAC1B,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,OAAO,KAAK,UAAU;AAAA,IAC3B,MAAM,QAAQ;AAAA,IACd,WAAW,QAAQ;AAAA,EACpB,CAAC;AAED,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,WAAW,OAAO,IAAI,QAAQ,OAAO;AAAA,MAChD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,QACA,MAAM;AAAA,MACP;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA6B,IAAI;AACvC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,iCAAiC,MAAM,OAAO,EAAE;AAAA,IACvE;AACA,UAAM,IAAI,YAAY,gDAAgD;AAAA,EACvE;AACD;;;ACtFO,IAAM,YAAY,OACxB,QACA,YAC0B;AAC1B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,OAAO,KAAK,UAAU,OAAO;AAEnC,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,gBAAgB;AAAA,MACtD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAmB,MAAM,QAAQ,KAAK;AAC5C,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,+BAA+B,MAAM,OAAO,EAAE;AAAA,IACrE;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;ACrEO,IAAM,WAAW,OACvB,QACA,YAC4B;AAC5B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,SAAS,IAAI,gBAAgB;AAEnC,MAAI,SAAS;AACZ,UAAM,EAAE,QAAQ,MAAM,SAAS,YAAY,UAAU,IAAI;AAEzD,QAAI,OAAQ,QAAO,OAAO,UAAU,OAAO,SAAS,CAAC;AACrD,QAAI,YAAY,OAAW,QAAO,OAAO,WAAW,QAAQ,SAAS,CAAC;AACtE,QAAI,eAAe;AAClB,aAAO,OAAO,cAAc,WAAW,SAAS,CAAC;AAClD,QAAI,cAAc;AACjB,aAAO,OAAO,aAAa,UAAU,SAAS,CAAC;AAChD,QAAI,KAAM,QAAO,OAAO,QAAQ,IAAI;AAAA,EACrC;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,gBAAgB,OAAO,SAAS,CAAC;AAAA,MAC5C;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAuB,MAAM,QAAQ,KAAK;AAChD,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,8BAA8B,MAAM,OAAO,EAAE;AAAA,IACpE;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;AC9FA,IAAMC,QAAO,CAAC,iBAAwC;AACrD,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC/B,eAAW,SAAS,YAAY;AAAA,EACjC,CAAC;AACF;AAEO,IAAM,aAAa,OACzB,QACA,SACkC;AAClC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AACA,cAAU,EAAE,GAAG,OAAO,cAAc;AAAA,EACrC,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,YAAiC,CAAC;AAExC,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,aAAW,OAAO,MAAM;AACvB,QAAI;AACH,YAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,gBAAgB,GAAG,IAAI;AAAA,QAC7D,QAAQ;AAAA,QACR;AAAA,MACD,CAAC;AAED,YAAMA,MAAK,GAAG;AAEd,UAAI,CAAC,QAAQ,IAAI;AAChB,cAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,QAAQ;AAAA,YACR;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,QAAQ;AAAA,cACrB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,YAAM,SAAiB,MAAM,QAAQ,KAAK;AAC1C,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ;AAAA,MACT,CAAC;AAAA,IACF,SAAS,OAAO;AACf,UAAI;AAEJ,UAAI,iBAAiB,aAAa;AACjC,uBAAe,MAAM;AAAA,MACtB,WAAW,iBAAiB,OAAO;AAClC,uBAAe,sBAAsB,GAAG,KAAK,MAAM,OAAO;AAAA,MAC3D,OAAO;AACN,uBAAe,gDAAgD,GAAG;AAAA,MACnE;AAEA,gBAAU,KAAK;AAAA,QACd;AAAA,QACA,QAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAAA,EACD;AAEA,SAAO;AACR;;;AC/FO,IAAM,eAAe,OAC3B,QACA,cACA,SACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,QAAQ;AAEzD,QAAM,OAAO,SAAS,UAAU,OAC7B,SAAS,UAAU,OACnB;AAEH,QAAM,SAAS,OAAO,KAAK,cAAc,QAAQ;AAEjD,QAAM,OAAO,IAAI,KAAK,CAAC,MAAM,CAAC;AAE9B,QAAM,OAAO,IAAI,SAAS;AAE1B,OAAK,OAAO,QAAQ,MAAM,IAAI;AAC9B,OAAK,OAAO,WAAW,OAAO;AAC9B,OAAK,OAAO,QAAQ,IAAI;AACxB,MAAI,SAAS,SAAS;AACrB,SAAK,OAAO,YAAY,QAAQ,OAAO;AAAA,EACxC;AACA,MAAI,SAAS,UAAU,WAAW;AACjC,SAAK,OAAO,aAAa,KAAK,UAAU,QAAQ,SAAS,SAAS,CAAC;AAAA,EACpE;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI,SAAS,KAAK;AACjB,QAAI;AACH,YAAM,UAAU,MAAM,MAAM,QAAQ,KAAK;AAAA,QACxC,QAAQ;AAAA,QACR,MAAM;AAAA,MACP,CAAC;AAED,UAAI,CAAC,QAAQ,IAAI;AAChB,cAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,QAAQ;AAAA,YACR;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,QAAQ;AAAA,cACrB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,YAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,YAAM,UAA0B,IAAI;AACpC,aAAO;AAAA,IACR,SAAS,OAAO;AACf,UAAI,iBAAiB,aAAa;AACjC,cAAM;AAAA,MACP;AACA,UAAI,iBAAiB,OAAO;AAC3B,cAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,MAClE;AACA,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU;AAAA,MAChD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA0B,IAAI;AACpC,QAAI,SAAS,WAAW;AACvB,YAAM,YAAY,MAAM;AAAA,QACvB,GAAG,QAAQ,oBAAoB,QAAQ,EAAE;AAAA,QACzC;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,YACR,eAAe,UAAU,GAAG;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,UAAI,UAAU,IAAI;AACjB,gBAAQ,aAAa;AACrB,eAAO;AAAA,MACR,OAAO;AACN,cAAM,YAAY,MAAM,UAAU,KAAK;AACvC,cAAM,IAAI;AAAA,UACT,oCAAoC,SAAS;AAAA,UAC7C,UAAU;AAAA,UACV;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,IAClE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC7KO,IAAM,wBAAwB,OACpC,QACA,SACA,YACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAaA,QAAM,OAAO,SAAS,QAAQ,KAAK,OAAM,oBAAI,KAAK,GAAE,QAAQ,IAAI,GAAI;AAEpE,QAAM,UAAuB;AAAA,IAC5B;AAAA,IACA,SAAS,QAAQ;AAAA,EAClB;AAEA,MAAI,QAAQ,SAAS;AACpB,YAAQ,WAAW,QAAQ;AAAA,EAC5B;AAEA,MAAI,QAAQ,MAAM;AACjB,YAAQ,WAAW,QAAQ;AAAA,EAC5B;AAEA,MAAI,QAAQ,WAAW;AACtB,YAAQ,YAAY,QAAQ;AAAA,EAC7B;AAEA,MAAI,SAAS;AACZ,YAAQ,UAAU;AAAA,EACnB;AAEA,MAAI,QAAQ,aAAa;AACxB,YAAQ,gBAAgB,QAAQ;AAAA,EACjC;AAEA,MAAI,QAAQ,WAAW;AACtB,YAAQ,mBAAmB,QAAQ;AAAA,EACpC;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,gBAAgB;AAAA,MAChB,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,eAAe;AAAA,MACrD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM,KAAK,UAAU,OAAO;AAAA,IAC7B,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI;AAAA,QACT,qCAAqC,MAAM,OAAO;AAAA,MACnD;AAAA,IACD;AACA,UAAM,IAAI,YAAY,oDAAoD;AAAA,EAC3E;AACD;;;AC3HO,SAAS,iBAAiB,KAAqB;AACrD,QAAM,QAAQ,IAAI,MAAM,mBAAmB;AAC3C,MAAI,SAAS,MAAM,CAAC,GAAG;AACtB,WAAO,MAAM,CAAC;AAAA,EACf;AACA,QAAM,IAAI,aAAa,4BAA4B,KAAK;AAAA,IACvD,OAAO;AAAA,IACP,MAAM;AAAA,IACN,UAAU;AAAA,MACT,YAAY;AAAA,IACb;AAAA,EACD,CAAC;AACF;;;ACLO,IAAM,aAAa,OACzB,QACA,MACA,SACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,OAAO;AAExD,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI,KAAK,OAAO,UAAU;AACzB,QAAIC;AAEJ,QAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,MAAAA,WAAU;AAAA,QACT,eAAe,UAAU,GAAG;AAAA,QAC5B,GAAG,OAAO;AAAA,MACX;AAAA,IACD,OAAO;AACN,MAAAA,WAAU;AAAA,QACT,eAAe,UAAU,GAAG;AAAA,QAC5B,QAAQ;AAAA,MACT;AAAA,IACD;AAEA,UAAM,OAAO,SAAS,UAAU,QAAQ,KAAK,QAAQ;AAErD,QAAI,WAAmB,YAAY,KAAK,IAAI,CAAC,aAAa,KAAK,KAAK,IAAI,CAAC,YAAY,KAAK,OAAO,CAAC;AAElG,QAAI,SAAS,SAAS;AACrB,iBAAW,aAAa,KAAK,QAAQ,OAAO,CAAC;AAAA,IAC9C;AAEA,QAAI,SAAS,UAAU,WAAW;AACjC,iBACC,cAAc,KAAK,KAAK,UAAU,QAAQ,SAAS,SAAS,CAAC,CAAC;AAAA,IAChE;AAEA,QAAI,kBAA0B,GAAG,QAAQ;AAEzC,QAAI,SAAS,KAAK;AACjB,wBAAkB,QAAQ;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,MAAM,iBAAiB;AAAA,MAC3C,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,iBAAiB,GAAG,KAAK,IAAI;AAAA,QAC7B,mBAAmB;AAAA,QACnB,GAAGA;AAAA,MACJ;AAAA,IACD,CAAC;AACD,UAAM,MAAM,OAAO,QAAQ,IAAI,UAAU;AACzC,QAAI,CAAC,KAAK;AACT,YAAM,YAAY,MAAM,OAAO,KAAK;AACpC,YAAM,IAAI,aAAa,2BAA2B,OAAO,QAAQ;AAAA,QAChE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,OAAO;AAAA,UACnB,gBAAgB,OAAO;AAAA,QACxB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,YAAY,KAAK,OAAO;AAC9B,UAAM,cAAc,KAAK,KAAK,KAAK,OAAO,SAAS;AACnD,QAAI,SAAS;AACb,QAAI;AAEJ,aAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACrC,YAAM,QAAQ,KAAK,MAAM,QAAQ,SAAS,SAAS;AACnD,kBAAY,MAAM,MAAM,KAAe;AAAA,QACtC,QAAQ;AAAA,QACR,SAAS;AAAA,UACR,gBAAgB;AAAA,UAChB,iBAAiB,OAAO,SAAS;AAAA,UACjC,GAAGA;AAAA,QACJ;AAAA,QACA,MAAM;AAAA,MACP,CAAC;AAED,UAAI,CAAC,UAAU,IAAI;AAClB,cAAM,YAAY,MAAM,UAAU,KAAK;AACvC,cAAM,IAAI;AAAA,UACT,mCAAmC,SAAS;AAAA,UAC5C,UAAU;AAAA,UACV;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,UAAU;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAEA,gBAAU,MAAM;AAAA,IACjB;AAEA,QAAI,UAAU,WAAW,KAAK;AAC7B,YAAM,SAAS,iBAAiB,GAAG;AACnC,UAAI;AACJ,UAAI,OAAO,aAAa;AACvB,uBAAe,OAAO;AAAA,MACvB,OAAO;AACN,uBAAe;AAAA,MAChB;AACA,YAAM,cAAc,MAAM;AAAA,QACzB,GAAG,YAAY,UAAU,OAAO,IAAI,MAAM;AAAA,QAC1C;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,YACR,eAAe,UAAU,GAAG;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,YAAM,WAAW,MAAM,YAAY,KAAK;AACxC,YAAMC,QAAuB,SAAS;AACtC,UAAI,SAAS,WAAW;AACvB,cAAM,YAAY,MAAM;AAAA,UACvB,GAAG,QAAQ,oBAAoBA,MAAK,EAAE;AAAA,UACtC;AAAA,YACC,QAAQ;AAAA,YACR,SAAS;AAAA,cACR,eAAe,UAAU,GAAG;AAAA,YAC7B;AAAA,UACD;AAAA,QACD;AACA,YAAI,UAAU,IAAI;AACjB,UAAAA,MAAK,aAAa;AAClB,iBAAOA;AAAA,QACR,OAAO;AACN,gBAAM,YAAY,MAAM,UAAU,KAAK;AACvC,gBAAM,IAAI;AAAA,YACT,oCAAoC,SAAS;AAAA,YAC7C,UAAU;AAAA,YACV;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,UAAU;AAAA,cACvB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,aAAOA;AAAA,IACR;AAAA,EACD;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,OAAO,IAAI,SAAS;AAC1B,OAAK,OAAO,QAAQ,MAAM,KAAK,IAAI;AAEnC,OAAK,OAAO,WAAW,OAAO;AAE9B,OAAK,OAAO,QAAQ,SAAS,UAAU,QAAQ,KAAK,QAAQ,eAAe;AAE3E,MAAI,SAAS,SAAS;AACrB,SAAK,OAAO,YAAY,QAAQ,OAAO;AAAA,EACxC;AAEA,MAAI,SAAS,UAAU,WAAW;AACjC,SAAK,OAAO,aAAa,KAAK,UAAU,QAAQ,SAAS,SAAS,CAAC;AAAA,EACpE;AAEA,MAAI,SAAS,KAAK;AACjB,QAAI;AACH,YAAM,UAAU,MAAM,MAAM,QAAQ,KAAK;AAAA,QACxC,QAAQ;AAAA,QACR;AAAA,QACA,MAAM;AAAA,MACP,CAAC;AAED,UAAI,CAAC,QAAQ,IAAI;AAChB,cAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,QAAQ;AAAA,YACR;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,QAAQ;AAAA,cACrB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,YAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,YAAM,UAA0B,IAAI;AACpC,aAAO;AAAA,IACR,SAAS,OAAO;AACf,UAAI,iBAAiB,aAAa;AACjC,cAAM;AAAA,MACP;AACA,UAAI,iBAAiB,OAAO;AAC3B,cAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,MAClE;AACA,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU;AAAA,MAChD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AACA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA0B,IAAI;AACpC,QAAI,SAAS,WAAW;AACvB,YAAM,YAAY,MAAM;AAAA,QACvB,GAAG,QAAQ,oBAAoB,QAAQ,EAAE;AAAA,QACzC;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,YACR,eAAe,UAAU,GAAG;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,UAAI,UAAU,IAAI;AACjB,gBAAQ,aAAa;AACrB,eAAO;AAAA,MACR,OAAO;AACN,cAAM,YAAY,MAAM,UAAU,KAAK;AACvC,cAAM,IAAI;AAAA,UACT,oCAAoC,SAAS;AAAA,UAC7C,UAAU;AAAA,UACV;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,yBAAyB,MAAM,OAAO,EAAE;AAAA,IAC/D;AACA,UAAM,IAAI,YAAY,oDAAoD;AAAA,EAC3E;AACD;;;AClTO,IAAM,kBAAkB,OAC9B,QACA,OACA,SACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,QAAQ;AAEzD,QAAM,SAAS,SAAS,UAAU,QAAQ;AAE1C,QAAM,OAAO,IAAI,SAAS;AAE1B,aAAW,QAAQ,MAAM,KAAK,KAAK,GAAG;AACrC,UAAM,OAAO,KAAK,sBAAsB,GAAG,MAAM,IAAI,KAAK,IAAI;AAC9D,SAAK,OAAO,QAAQ,MAAM,IAAI;AAAA,EAC/B;AAgBA,OAAK;AAAA,IACJ;AAAA,IACA,KAAK,UAAU;AAAA,MACd,MAAM;AAAA,MACN,WAAW,SAAS,UAAU;AAAA,IAC/B,CAAC;AAAA,EACF;AAEA,OAAK;AAAA,IACJ;AAAA,IACA,KAAK,UAAU;AAAA,MACd,SAAS,SAAS;AAAA,MAClB,YAAY;AAAA,IACb,CAAC;AAAA,EACF;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,QAAQ;AAAA,IACT;AAAA,EACD;AAGA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AAOH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,IAAI;AAAA,MAC1C,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAE/B,UAAM,UAA0B;AAAA,MAC/B,IAAI,IAAI;AAAA,MACR,MAAM,IAAI;AAAA,MACV,KAAK,IAAI;AAAA,MACT,MAAM,IAAI;AAAA,MACV,YAAY,IAAI;AAAA,MAChB,iBAAiB,IAAI;AAAA,MACrB,WAAW,IAAI;AAAA,MACf,UAAU,IAAI;AAAA,MACd,WAAW,IAAI;AAAA,MACf,YAAY;AAAA,MACZ,SAAS;AAAA,IACV;AA+BA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,+BAA+B,MAAM,OAAO,EAAE;AAAA,IACrE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACjKO,IAAM,aAAa,OACzB,QACA,UACA,SACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,QAAQ;AAEzD,QAAM,OAAO,KAAK,UAAU,QAAQ;AACpC,QAAM,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC;AAC5B,QAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAEvE,QAAM,OAAO,IAAI,SAAS;AAC1B,OAAK,OAAO,QAAQ,MAAM,KAAK,IAAI;AACnC,OAAK,OAAO,WAAW,OAAO;AAC9B,OAAK,OAAO,QAAQ,SAAS,UAAU,QAAQ,KAAK,QAAQ,eAAe;AAC3E,MAAI,SAAS,SAAS;AACrB,SAAK,OAAO,YAAY,QAAQ,OAAO;AAAA,EACxC;AACA,MAAI,SAAS,UAAU,WAAW;AACjC,SAAK,OAAO,aAAa,KAAK,UAAU,QAAQ,SAAS,SAAS,CAAC;AAAA,EACpE;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI,SAAS,KAAK;AACjB,QAAI;AACH,YAAM,UAAU,MAAM,MAAM,QAAQ,KAAK;AAAA,QACxC,QAAQ;AAAA,QACR,MAAM;AAAA,MACP,CAAC;AAED,UAAI,CAAC,QAAQ,IAAI;AAChB,cAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,QAAQ;AAAA,YACR;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,QAAQ;AAAA,cACrB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,YAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,YAAM,UAA0B,IAAI;AACpC,aAAO;AAAA,IACR,SAAS,OAAO;AACf,UAAI,iBAAiB,aAAa;AACjC,cAAM;AAAA,MACP;AACA,UAAI,iBAAiB,OAAO;AAC3B,cAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,MAClE;AACA,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU;AAAA,MAChD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA0B,IAAI;AACpC,QAAI,SAAS,WAAW;AACvB,YAAM,YAAY,MAAM;AAAA,QACvB,GAAG,QAAQ,oBAAoB,QAAQ,EAAE;AAAA,QACzC;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,YACR,eAAe,UAAU,GAAG;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,UAAI,UAAU,IAAI;AACjB,gBAAQ,aAAa;AACrB,eAAO;AAAA,MACR,OAAO;AACN,cAAM,YAAY,MAAM,UAAU,KAAK;AACvC,cAAM,IAAI;AAAA,UACT,oCAAoC,SAAS;AAAA,UAC7C,UAAU;AAAA,UACV;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,0BAA0B,MAAM,OAAO,EAAE;AAAA,IAChE;AACA,UAAM,IAAI,YAAY,gDAAgD;AAAA,EACvE;AACD;;;AC1KO,IAAM,YAAY,OACxB,QACA,KACA,SACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,QAAQ;AACzD,QAAM,OAAO,IAAI,SAAS;AAE1B,QAAM,SAAS,MAAM,MAAM,GAAG;AAE9B,MAAI,CAAC,OAAO,IAAI;AACf,UAAM,YAAY,MAAM,OAAO,KAAK;AACpC,UAAM,IAAI,aAAa,eAAe,SAAS,IAAI,OAAO,QAAQ;AAAA,MACjE,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,QACT,YAAY,OAAO;AAAA,MACpB;AAAA,IACD,CAAC;AAAA,EACF;AAEA,QAAM,cAAc,MAAM,OAAO,YAAY;AAE7C,QAAM,OAAO,IAAI,KAAK,CAAC,WAAW,CAAC;AAEnC,QAAM,OAAO,SAAS,UAAU,QAAQ;AAExC,QAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,IAAI;AAElC,OAAK,OAAO,QAAQ,MAAM,IAAI;AAC9B,OAAK,OAAO,WAAW,OAAO;AAC9B,OAAK,OAAO,QAAQ,IAAI;AACxB,MAAI,SAAS,SAAS;AACrB,SAAK,OAAO,YAAY,QAAQ,OAAO;AAAA,EACxC;AAEA,MAAI,SAAS,UAAU,WAAW;AACjC,SAAK,OAAO,aAAa,KAAK,UAAU,QAAQ,SAAS,SAAS,CAAC;AAAA,EACpE;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,WAAW;AACrB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI,SAAS,KAAK;AACjB,QAAI;AACH,YAAM,UAAU,MAAM,MAAM,QAAQ,KAAK;AAAA,QACxC,QAAQ;AAAA,QACR,MAAM;AAAA,MACP,CAAC;AAED,UAAI,CAAC,QAAQ,IAAI;AAChB,cAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,gBAAM,IAAI;AAAA,YACT,0BAA0B,SAAS;AAAA,YACnC,QAAQ;AAAA,YACR;AAAA,cACC,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,gBACT,YAAY,QAAQ;AAAA,cACrB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AACA,cAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,UAClE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,YACT,YAAY,QAAQ;AAAA,UACrB;AAAA,QACD,CAAC;AAAA,MACF;AAEA,YAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,YAAM,UAA0B,IAAI;AACpC,aAAO;AAAA,IACR,SAAS,OAAO;AACf,UAAI,iBAAiB,aAAa;AACjC,cAAM;AAAA,MACP;AACA,UAAI,iBAAiB,OAAO;AAC3B,cAAM,IAAI,YAAY,4BAA4B,MAAM,OAAO,EAAE;AAAA,MAClE;AACA,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU;AAAA,MAChD,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA0B,IAAI;AACpC,QAAI,SAAS,WAAW;AACvB,YAAM,YAAY,MAAM;AAAA,QACvB,GAAG,QAAQ,oBAAoB,QAAQ,EAAE;AAAA,QACzC;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,YACR,eAAe,UAAU,GAAG;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,UAAI,UAAU,IAAI;AACjB,gBAAQ,aAAa;AACrB,eAAO;AAAA,MACR,OAAO;AACN,cAAM,YAAY,MAAM,UAAU,KAAK;AACvC,cAAM,IAAI;AAAA,UACT,oCAAoC,SAAS;AAAA,UAC7C,UAAU;AAAA,UACV;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,yBAAyB,MAAM,OAAO,EAAE;AAAA,IAC/D;AACA,UAAM,IAAI,YAAY,kDAAkD;AAAA,EACzE;AACD;;;ACnLO,IAAM,YAAY,OACxB,QACA,KACA,YACI;AACJ,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,MAA0B,SAAS,QAAQ,QAAQ;AAEzD,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,GAAG;AAAA,MAC5B,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,QAAM,cAAmC;AAAA,IACxC;AAAA,IACA,MAAM,SAAS,WAAW,SAAS,UAAU,OAAO;AAAA,IACpD,WAAW,SAAS,UAAU;AAAA,IAC9B,UAAU,SAAS;AAAA,IACnB,YAAY,SAAS;AAAA,EACtB;AAEA,QAAM,OAAO,KAAK,UAAU,WAAW;AAEvC,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,4BAA4B;AAAA,MAClE,QAAQ;AAAA,MACR;AAAA,MACA,MAAM;AAAA,IACP,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAA4B,IAAI;AACtC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,yBAAyB,MAAM,OAAO,EAAE;AAAA,IAC/D;AACA,UAAM,IAAI,YAAY,gDAAgD;AAAA,EACvE;AACD;;;ACjGO,IAAM,eAAe,CAAC,WAAqC;AACjE,MAAI,UAAU,QAAQ;AACtB,MAAI,UAAU,SAAS;AACtB,QAAI,WAAW,CAAC,QAAQ,WAAW,UAAU,GAAG;AAC/C,gBAAU,WAAW,OAAO;AAAA,IAC7B;AACA,WAAO,gBAAgB;AAAA,EACxB;AACA,SAAO;AACR;;;ACHO,IAAM,YAAN,MAAgB;AAAA,EAKtB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,WAAW,IAAI,kBAAkB,KAAK,MAAM;AACjD,SAAK,YAAY,IAAI,mBAAmB,KAAK,MAAM;AAAA,EACpD;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AACd,SAAK,SAAS,aAAa,SAAS;AACpC,SAAK,UAAU,aAAa,SAAS;AAAA,EACtC;AAAA,EAEA,QAAQ,SAKyB;AAChC,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,IACT;AAAA,EACD;AACD;;;ACvCO,IAAM,iBAAiB,CAC7B,SACoC;AACpC,QAAM,MAAM,oBAAI,KAAK;AACrB,QAAM,QAAQ,oBAAI,KAAK;AACvB,QAAM,QAAQ,MAAM,QAAQ,IAAI,IAAI;AAGpC,SAAO;AAAA,IACN,OAAO,MAAM,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAAA,IACvC,KAAK,IAAI,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAAA,EACpC;AACD;;;ACJO,IAAM,kBAAN,MAAsB;AAAA,EAI5B,YACC,QACA,QACA,OACA,KACC;AACD,SAAK,SAAS;AACd,SAAK,QAAQ;AAAA,MACZ,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,SAAS;AAAA;AAAA,MACT,WAAW;AAAA,IACZ;AAAA,EACD;AAAA,EAEA,IAAI,KAAoB;AACvB,SAAK,MAAM,YAAY;AACvB,QAAI,KAAK;AACR,WAAK,MAAM,MAAM;AAAA,IAClB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,SAAS,UAAyB;AACjC,SAAK,MAAM,YAAY;AACvB,QAAI,UAAU;AACb,WAAK,MAAM,YAAY;AAAA,IACxB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAA0B;AACnC,SAAK,MAAM,YAAY;AACvB,QAAI,WAAW;AACd,WAAK,MAAM,aAAa;AAAA,IACzB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAAwB;AAC/B,SAAK,MAAM,YAAY;AACvB,QAAI,SAAS;AACZ,WAAK,MAAM,UAAU;AAAA,IACtB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,OAAO,QAAuB;AAC7B,SAAK,MAAM,YAAY;AACvB,QAAI,QAAQ;AACX,WAAK,MAAM,SAAS;AAAA,IACrB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAAwB;AAC/B,SAAK,MAAM,YAAY;AACvB,QAAI,SAAS;AACZ,WAAK,MAAM,UAAU;AAAA,IACtB;AACA,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAAqB;AAC1B,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,OAA6B;AACjC,SAAK,MAAM,aAAa;AACxB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,cAA4B;AAChC,UAAM,EAAE,OAAO,IAAI,IAAI,eAAe,YAAY;AAClD,SAAK,MAAM,aAAa;AACxB,SAAK,MAAM,WAAW;AACtB,WAAO;AAAA,EACR;AAAA,EAEA,KACC,aACe;AACf,WAAO,kBAAkB,KAAK,QAAQ,KAAK,KAAK,EAAE,KAAK,WAAW;AAAA,EACnE;AACD;;;AC/FO,IAAM,qBAAN,cAAiC,gBAAgB;AAAA,EACvD,YAAY,QAAuB;AAClC,UAAM,QAAQ,IAAI,IAAI,EAAE;AACxB,SAAK,MAAM,UAAU;AAAA,EACtB;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,YAAY,OAAgB,KAAoB;AAC/C,QAAI,MAAO,MAAK,MAAM,aAAa;AACnC,QAAI,IAAK,MAAK,MAAM,WAAW;AAC/B,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,QAAsB;AAC1B,SAAK,MAAM,iBAAiB;AAC5B,WAAO;AAAA,EACR;AACD;;;ACrBO,IAAM,mBAAN,MAAoD;AAAA,EAQ1D,YAAY,QAAkC,OAAU;AALxD,SAAQ,eAAe;AACvB,SAAQ,kBAAkB;AAC1B,SAAiB,0BAA0B;AAC3C,SAAiB,eAAe;AAG/B,SAAK,SAAS;AACd,SAAK,QAAQ;AAAA,EACd;AAAA,EAEA,IAAI,KAAmB;AACtB,SAAK,MAAM,MAAM;AACjB,WAAO;AAAA,EACR;AAAA,EAEA,SAAS,UAAwB;AAChC,SAAK,MAAM,YAAY;AACvB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAyB;AAClC,SAAK,MAAM,aAAa;AACxB,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAAuB;AAC9B,SAAK,MAAM,UAAU;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,OAAO,QAAsB;AAC5B,SAAK,MAAM,SAAS;AACpB,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAAuB;AAC9B,SAAK,MAAM,UAAU;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAAqB;AAC1B,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,OAA6B;AACjC,SAAK,MAAM,aAAa;AACxB,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBA,MAAgB,eAA2B;AAE1C,UAAM,IAAI,MAAM,0DAA0D;AAAA,EAC3E;AAAA,EAEA,KAAK,aAAwD;AAC5D,WAAO,KAAK,aAAa,EAAE,KAAK,WAAW;AAAA,EAC5C;AACD;;;AC1EO,IAAM,oBAAN,cAAgC,gBAAgB;AAAA,EACtD,YAAY,QAAuB;AAClC,UAAM,QAAQ,IAAI,IAAI,EAAE;AACxB,SAAK,MAAM,UAAU;AAAA,EACtB;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,YAAY,OAAgB,KAAoB;AAC/C,QAAI,MAAO,MAAK,MAAM,aAAa;AACnC,QAAI,IAAK,MAAK,MAAM,WAAW;AAC/B,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,QAAsB;AAC1B,SAAK,MAAM,iBAAiB;AAC5B,WAAO;AAAA,EACR;AACD;;;ACfO,IAAM,+BAAN,cAA2C,iBAGhD;AAAA,EACD,YACC,QACA,QACA,OACA,KACA,cACC;AACD,UAAM,QAAQ;AAAA,MACb,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,eAAe;AAAA,IAChB,CAAC;AAAA,EACF;AAAA,EAEA,OAAO,QAAwC;AAC9C,SAAK,MAAM,UAAU;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,MAAgB,eAAuD;AACtE,WAAO,sBAAsB,KAAK,QAAQ,KAAK,KAAK;AAAA,EACrD;AAAA,EAEA,MAAM,MAA8C;AACnD,WAAO,KAAK,aAAa;AAAA,EAC1B;AACD;;;AC/BO,IAAM,eAAN,MAAmB;AAAA,EAWzB,YAAY,QAAkC,SAA+B;AAT7E,SAAQ,QAA2B,CAAC;AAUnC,SAAK,SAAS;AACd,SAAK,UAAU;AAAA,EAChB;AAAA,EAEA,KAAK,MAA4B;AAChC,SAAK,MAAM,OAAO;AAClB,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAA6B;AAClC,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,SAAS,UAAiC;AACzC,SAAK,MAAM,WAAW;AACtB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAiC;AAC1C,SAAK,MAAM,YAAY;AACvB,WAAO;AAAA,EACR;AAAA,EAEA,KACC,aAC6B;AAC7B,WAAO,KAAK,UAAU,EACpB,KAAK,CAAC,aAAa;AACnB,WAAK,gBAAgB,SAAS;AAC9B,aAAO;AAAA,IACR,CAAC,EACA,KAAK,WAAW;AAAA,EACnB;AAAA,EAEA,MAAc,YAAwC;AACrD,QAAI,KAAK,eAAe;AACvB,WAAK,MAAM,YAAY,KAAK;AAAA,IAC7B;AACA,WAAO,WAAW,KAAK,QAAQ,KAAK,SAAS,KAAK,KAAK;AAAA,EACxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBA,QAAQ,OAAO,aAAa,IAI1B;AACD,WAAO,MAAM;AACZ,YAAM,WAAW,MAAM,KAAK,UAAU;AACtC,iBAAW,QAAQ,SAAS,QAAQ;AACnC,cAAM;AAAA,MACP;AACA,UAAI,CAAC,SAAS,iBAAiB;AAC9B;AAAA,MACD;AACA,WAAK,gBAAgB,SAAS;AAAA,IAC/B;AAAA,EACD;AAAA,EAEA,MAAM,MAAoC;AACzC,UAAM,WAAgC,CAAC;AACvC,qBAAiB,QAAQ,MAAM;AAC9B,eAAS,KAAK,IAAI;AAAA,IACnB;AACA,WAAO;AAAA,EACR;AACD;;;ACjFO,IAAM,eAAN,MAAmB;AAAA,EAGzB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,OAAO,SAAmD;AACzD,WAAO,YAAY,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAClD;AAAA,EAEA,OAAqB;AACpB,WAAO,IAAI,aAAa,KAAK,QAAQ,QAAQ;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAsD;AACzD,WAAO,SAAS,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS,SAA+D;AACvE,WAAO,WAAW,KAAK,QAAQ,SAAS,QAAQ;AAAA,EACjD;AAAA,EAEA,YAAY,SAA+D;AAC1E,WAAO,gBAAgB,KAAK,QAAQ,SAAS,QAAQ;AAAA,EACtD;AAAA,EAEA,OAAO,SAAyD;AAC/D,WAAO,YAAY,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAClD;AAAA,EAEA,OAAO,SAA2C;AACjD,WAAO,YAAY,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAClD;AACD;;;ACtCO,IAAM,gBAAN,MAAoB;AAAA,EAG1B,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,OAAO,SAAmD;AACzD,WAAO,YAAY,KAAK,QAAQ,SAAS,SAAS;AAAA,EACnD;AAAA,EAEA,OAAqB;AACpB,WAAO,IAAI,aAAa,KAAK,QAAQ,SAAS;AAAA,EAC/C;AAAA,EAEA,IAAI,SAAsD;AACzD,WAAO,SAAS,KAAK,QAAQ,SAAS,SAAS;AAAA,EAChD;AAAA,EAEA,SAAS,SAA+D;AACvE,WAAO,WAAW,KAAK,QAAQ,SAAS,SAAS;AAAA,EAClD;AAAA,EAEA,YAAY,SAA+D;AAC1E,WAAO,gBAAgB,KAAK,QAAQ,SAAS,SAAS;AAAA,EACvD;AAAA,EAEA,OAAO,SAAyD;AAC/D,WAAO,YAAY,KAAK,QAAQ,SAAS,SAAS;AAAA,EACnD;AAAA,EAEA,OAAO,SAA2C;AACjD,WAAO,YAAY,KAAK,QAAQ,SAAS,SAAS;AAAA,EACnD;AACD;;;ACrDO,IAAM,SAAN,MAAa;AAAA,EAKnB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,SAAS,IAAI,aAAa,MAAM;AACrC,SAAK,UAAU,IAAI,cAAc,MAAM;AAAA,EACxC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AACD;;;ACTO,IAAM,OAAN,MAAW;AAAA,EAGjB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,OAAO,SAA2C;AACjD,WAAO,UAAU,KAAK,QAAQ,OAAO;AAAA,EACtC;AAAA,EAEA,OAAmB;AAClB,WAAO,IAAI,WAAW,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,OAAO,MAA8C;AACpD,WAAO,WAAW,KAAK,QAAQ,IAAI;AAAA,EACpC;AACD;;;AC7BO,IAAM,aAAN,MAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASvB,YAAY,QAAkC;AAP9C,SAAQ,QAAsB,CAAC;AAQ9B,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,OAAO,QAA4B;AAClC,SAAK,MAAM,SAAS;AACpB,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAA8B;AACrC,SAAK,MAAM,UAAU;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,WAAW,YAAiC;AAC3C,SAAK,MAAM,aAAa;AACxB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAgC;AACzC,SAAK,MAAM,YAAY;AACvB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,MAA0B;AAC9B,SAAK,MAAM,OAAO;AAClB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,aAAoE;AACxE,WAAO,SAAS,KAAK,QAAQ,KAAK,KAAK,EAAE,KAAK,WAAW;AAAA,EAC1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBA,QAAQ,OAAO,aAAa,IAAgD;AAC3E,QAAI,UAAU;AACd,QAAI,SAAS;AAEb,WAAO,SAAS;AAEf,WAAK,MAAM,SAAS;AAEpB,YAAM,QAAQ,MAAM,SAAS,KAAK,QAAQ,KAAK,KAAK;AAEpD,iBAAW,QAAQ,OAAO;AACzB,cAAM;AAAA,MACP;AAEA,UAAI,MAAM,WAAW,GAAG;AACvB,kBAAU;AAAA,MACX,OAAO;AACN,kBAAU,MAAM;AAAA,MACjB;AAAA,IACD;AAAA,EACD;AAAA,EAEA,MAAM,MAA8B;AACnC,UAAM,WAA0B,CAAC;AACjC,qBAAiB,QAAQ,MAAM;AAC9B,eAAS,KAAK,IAAI;AAAA,IACnB;AACA,WAAO;AAAA,EACR;AACD;;;ACpFO,IAAM,WAAN,MAAe;AAAA,EAKrB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,SAAS,IAAI,eAAe,MAAM;AACvC,SAAK,UAAU,IAAI,gBAAgB,MAAM;AAAA,EAC1C;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AACD;;;ACXO,IAAM,gCAAN,MAAoC;AAAA,EAK1C,YAAY,QAAkC,SAA4B;AAF1E,SAAQ,UAAgC,CAAC;AAGxC,SAAK,SAAS;AACd,SAAK,UAAU;AAAA,EAChB;AAAA,EAEA,cAAc,SAA8D;AAC3E,SAAK,UAAU,EAAE,GAAG,KAAK,SAAS,GAAG,QAAQ;AAC7C,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,aAA6D;AACjE,WAAO,iBAAiB,KAAK,QAAQ,KAAK,SAAS,KAAK,OAAO,EAAE;AAAA,MAChE;AAAA,IACD;AAAA,EACD;AACD;;;ACpBO,IAAM,sBAAN,MAA0B;AAAA,EAMhC,YACC,QACA,KACA,aACC;AANF,SAAQ,UAAgC,CAAC;AAOxC,SAAK,SAAS;AACd,SAAK,MAAM;AACX,SAAK,cAAc;AAAA,EACpB;AAAA,EAEA,cAAc,SAAoD;AACjE,SAAK,UAAU,EAAE,GAAG,KAAK,SAAS,GAAG,QAAQ;AAC7C,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,aAAqE;AACzE,WAAO,OAAO,KAAK,QAAQ,KAAK,KAAK,KAAK,aAAa,KAAK,OAAO,EAAE;AAAA,MACpE;AAAA,IACD;AAAA,EACD;AACD;;;AC9BO,IAAM,kBAAN,MAAsB;AAAA,EAG5B,YAAY,QAAkC;AAC7C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,IAAI,KAAkC;AACrC,WAAO,IAAI,oBAAoB,KAAK,QAAQ,KAAK,OAAO;AAAA,EACzD;AAAA,EAEA,iBAAiB,SAA2D;AAC3E,WAAO,IAAI,8BAA8B,KAAK,QAAQ,OAAO;AAAA,EAC9D;AACD;;;ACbO,IAAM,iBAAN,MAAqB;AAAA,EAG3B,YAAY,QAAkC;AAC7C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,IAAI,KAAkC;AACrC,WAAO,IAAI,oBAAoB,KAAK,QAAQ,KAAK,MAAM;AAAA,EACxD;AAAA,EAEA,QAAQ,KAAa,eAAyC;AAC7D,WAAO,eAAe,KAAK,QAAQ,KAAK,aAAa;AAAA,EACtD;AACD;;;ACTO,IAAM,UAAU,OACtB,QACA,IACA,YAC2B;AAC3B,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,GAAG,OAAO;AAAA,IACX;AAAA,EACD,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM,MAAM,GAAG,QAAQ,UAAU,OAAO,IAAI,EAAE,IAAI;AAAA,MACjE,QAAQ;AAAA,MACR;AAAA,IACD,CAAC;AAED,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,UAAM,UAAwB,IAAI;AAClC,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,8BAA8B,MAAM,OAAO,EAAE;AAAA,IACpE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AC5EO,IAAM,cAAN,MAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWxB,YAAY,QAAkC,SAA+B;AAT7E,SAAQ,QAAuB,CAAC;AAU/B,SAAK,SAAS;AACd,SAAK,UAAU;AAAA,EAChB;AAAA,EAEA,KAAK,MAA2B;AAC/B,SAAK,MAAM,OAAO;AAClB,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAA4B;AACjC,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,IAAI,KAA0B;AAC7B,SAAK,MAAM,MAAM;AACjB,WAAO;AAAA,EACR;AAAA,EAEA,SAAS,UAA+B;AACvC,SAAK,MAAM,WAAW;AACtB,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAAoC;AACzC,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,OAA4B;AACjC,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,WAAW,YAAkC;AAC5C,SAAK,MAAM,aAAa;AACxB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAgD;AACzD,SAAK,MAAM,WAAW;AACtB,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,SAA+B;AACtC,SAAK,MAAM,UAAU;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAgC;AACzC,SAAK,MAAM,YAAY;AACvB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,aAAuE;AAC3E,WAAO,KAAK,UAAU,EAAE,KAAK,WAAW;AAAA,EACzC;AAAA,EAEA,MAAc,YAAuC;AACpD,QAAI,KAAK,kBAAkB;AAC1B,WAAK,MAAM,YAAY,KAAK;AAAA,IAC7B;AACA,UAAM,WAAW,MAAM,UAAU,KAAK,QAAQ,KAAK,SAAS,KAAK,KAAK;AACtE,SAAK,mBAAmB,SAAS;AACjC,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBA,QAAQ,OAAO,aAAa,IAAiD;AAC5E,WAAO,MAAM;AACZ,YAAM,QAAQ,MAAM,KAAK,UAAU;AACnC,iBAAW,QAAQ,MAAM,OAAO;AAC/B,cAAM;AAAA,MACP;AACA,UAAI,CAAC,KAAK,kBAAkB;AAC3B;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEA,MAAM,MAA+B;AACpC,UAAM,WAA2B,CAAC;AAClC,qBAAiB,QAAQ,MAAM;AAC9B,eAAS,KAAK,IAAI;AAAA,IACnB;AACA,WAAO;AAAA,EACR;AACD;;;ACjHO,IAAM,cAAN,MAAkB;AAAA,EAUxB,YAAY,QAAkC;AAR9C,SAAQ,QAAuB,CAAC;AAGhC;AAAA,SAAQ,eAAe;AACvB,SAAQ,kBAAkB;AAC1B,SAAiB,0BAA0B;AAC3C,SAAiB,eAAe;AAG/B,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,IAAI,KAA0B;AAC7B,SAAK,MAAM,MAAM;AACjB,WAAO;AAAA,EACR;AAAA,EAEA,OACC,QASc;AACd,SAAK,MAAM,SAAS;AACpB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,OAA4B;AACrC,SAAK,MAAM,QAAQ;AACnB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAgC;AACzC,SAAK,MAAM,YAAY;AACvB,WAAO;AAAA,EACR;AAAA,EAEA,MAAc,YAAuC;AACpD,QAAI,KAAK,kBAAkB;AAC1B,WAAK,MAAM,YAAY,KAAK;AAAA,IAC7B;AACA,UAAM,WAAW,MAAM,MAAM,KAAK,QAAQ,KAAK,KAAK;AACpD,SAAK,mBAAmB,SAAS;AACjC,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,MAAkC;AACtC,SAAK,MAAM,OAAO;AAClB,WAAO;AAAA,EACR;AAAA,EAEA,KAAK,aAAuE;AAC3E,WAAO,MAAM,KAAK,QAAQ,KAAK,KAAK,EAAE,KAAK,WAAW;AAAA,EACvD;AAAA;AAAA,EAGA,MAAc,YAA2B;AACxC,SAAK;AACL,UAAM,MAAM,KAAK,IAAI;AACrB,QAAI,KAAK,gBAAgB,KAAK,yBAAyB;AACtD,YAAM,6BAA6B,MAAM,KAAK;AAC9C,UAAI,6BAA6B,KAAK,cAAc;AACnD,cAAM,YAAY,KAAK,eAAe;AACtC,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,SAAS,CAAC;AAAA,MAC9D;AACA,WAAK,eAAe;AAAA,IACrB;AACA,SAAK,kBAAkB,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,QAAQ,OAAO,aAAa,IAAiD;AAC5E,WAAO,MAAM;AACZ,YAAM,QAAQ,MAAM,KAAK,UAAU;AACnC,iBAAW,QAAQ,MAAM,MAAM;AAC9B,cAAM;AAAA,MACP;AACA,UAAI,CAAC,KAAK,kBAAkB;AAC3B;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEA,MAAM,MAA+B;AACpC,UAAM,WAA2B,CAAC;AAClC,qBAAiB,QAAQ,MAAM;AAC9B,eAAS,KAAK,IAAI;AAAA,IACnB;AACA,WAAO;AAAA,EACR;AACD;;;AClFO,IAAM,cAAN,MAAkB;AAAA,EAGxB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,OAAoB;AACnB,WAAO,IAAI,YAAY,KAAK,QAAQ,QAAQ;AAAA,EAC7C;AAAA,EAEA,IAAI,IAAmC;AACtC,WAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ;AAAA,EACzC;AAAA,EAEA,OAAO,OAA4C;AAClD,WAAO,WAAW,KAAK,QAAQ,OAAO,QAAQ;AAAA,EAC/C;AAAA,EAEA,OAAO,SAAmD;AACzD,WAAO,WAAW,KAAK,QAAQ,SAAS,QAAQ;AAAA,EACjD;AAAA,EAEA,QAAQ,SAAmD;AAC1D,WAAO,QAAQ,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAC9C;AAAA,EAEA,eAAe,SAAyD;AACvE,WAAO,YAAY,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAClD;AAAA,EAEA,WAAW,KAA8B;AACxC,WAAO,WAAW,KAAK,QAAQ,KAAK,QAAQ;AAAA,EAC7C;AAAA,EAEA,QAAqB;AACpB,WAAO,IAAI,YAAY,KAAK,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,WAAoC;AACpD,WAAO,iBAAiB,KAAK,QAAQ,SAAS;AAAA,EAC/C;AACD;;;ACrCO,IAAM,eAAN,MAAmB;AAAA,EAGzB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,OAAoB;AACnB,WAAO,IAAI,YAAY,KAAK,QAAQ,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,IAAmC;AACtC,WAAO,QAAQ,KAAK,QAAQ,IAAI,SAAS;AAAA,EAC1C;AAAA,EAEA,OAAO,OAA4C;AAClD,WAAO,WAAW,KAAK,QAAQ,OAAO,SAAS;AAAA,EAChD;AAAA,EAEA,OAAO,SAAmD;AACzD,WAAO,WAAW,KAAK,QAAQ,SAAS,SAAS;AAAA,EAClD;AAAA,EAEA,QAAQ,SAAmD;AAC1D,WAAO,QAAQ,KAAK,QAAQ,SAAS,SAAS;AAAA,EAC/C;AAAA,EAEA,eAAe,SAAyD;AACvE,WAAO,YAAY,KAAK,QAAQ,SAAS,SAAS;AAAA,EACnD;AAAA,EAEA,WAAW,KAA8B;AACxC,WAAO,WAAW,KAAK,QAAQ,KAAK,SAAS;AAAA,EAC9C;AAAA,EAEA,UAAU,QAAgD;AACzD,WAAO,cAAc,KAAK,QAAQ,MAAM;AAAA,EACzC;AAAA,EAEA,aACC,SACmD;AACnD,WAAO,eAAe,KAAK,QAAQ,OAAO;AAAA,EAC3C;AAAA,EAEA,cAAc,QAAgD;AAC7D,WAAO,kBAAkB,KAAK,QAAQ,MAAM;AAAA,EAC7C;AACD;;;ACpEO,IAAM,QAAN,MAAY;AAAA,EAKlB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,SAAS,IAAI,YAAY,MAAM;AACpC,SAAK,UAAU,IAAI,aAAa,MAAM;AAAA,EACvC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AACD;;;ACnBO,IAAM,gBAAN,MAAuB;AAAA,EAc7B,YACC,QACA,mBAIG,MACF;AAdF,SAAQ,WAAuC,CAAC;AAe/C,SAAK,SAAS;AACd,SAAK,iBAAiB;AACtB,SAAK,OAAO;AAAA,EACb;AAAA;AAAA,EAGA,KAAK,MAAgC;AACpC,QAAI,CAAC,KAAK,UAAU;AACnB,WAAK,WAAW,CAAC;AAAA,IAClB;AACA,SAAK,SAAS,OAAO;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,UAAU,WAAqD;AAC9D,QAAI,CAAC,KAAK,UAAU;AACnB,WAAK,WAAW,CAAC;AAAA,IAClB;AACA,SAAK,SAAS,YAAY;AAC1B,WAAO;AAAA,EACR;AAAA,EAEA,IAAI,KAA+B;AAClC,SAAK,OAAO;AACZ,WAAO;AAAA,EACR;AAAA,EAEA,YAA8B;AAC7B,SAAK,SAAS;AACd,WAAO;AAAA,EACR;AAAA,EAEA,IAAI,KAA+B;AAClC,SAAK,YAAY;AACjB,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,MAAM,SAAmC;AACxC,SAAK,UAAU;AACf,WAAO;AAAA,EACR;AAAA,EAEA,YAAY,eAA2C;AACtD,SAAK,gBAAgB;AACrB,WAAO;AAAA,EACR;AAAA,EAEA,KACC,aAIA,YAI+B;AAC/B,UAAM,UAAyB,KAAK,KAAK,KAAK,KAAK,SAAS,CAAC,KAAK,CAAC;AACnE,QAAI,KAAK,UAAU;AAClB,cAAQ,WAAW,KAAK;AAAA,IACzB;AACA,QAAI,KAAK,MAAM;AACd,cAAQ,OAAO,KAAK;AAAA,IACrB;AACA,QAAI,KAAK,SAAS;AACjB,cAAQ,UAAU,KAAK;AAAA,IACxB;AACA,QAAI,KAAK,QAAQ;AAChB,cAAQ,YAAY,KAAK;AAAA,IAC1B;AACA,QAAI,KAAK,WAAW;AACnB,cAAQ,MAAM,KAAK;AAAA,IACpB;AACA,QAAI,KAAK,eAAe;AACvB,cAAQ,gBAAgB,KAAK;AAAA,IAC9B;AACA,SAAK,KAAK,KAAK,KAAK,SAAS,CAAC,IAAI;AAClC,WAAO,KAAK,eAAe,KAAK,QAAQ,GAAG,KAAK,IAAI,EAAE;AAAA,MACrD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AACD;;;AC1FO,IAAM,eAAN,MAAmB;AAAA,EAGzB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,KAAK,MAAY,SAAwD;AACxE,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQC,OAAMC,aAAY,WAAW,QAAQD,OAAM,UAAUC,QAAO;AAAA,MACrE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,UACC,OACA,SACgC;AAChC,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQ,MAAMA,aACd,gBAAgB,QAAQ,MAAM,UAAUA,QAAO;AAAA,MAChD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,OACC,cACA,SACgC;AAChC,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQC,eAAcD,aACtB,aAAa,QAAQC,eAAc,UAAUD,QAAO;AAAA,MACrD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IAAI,KAAa,SAAwD;AACxE,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQE,MAAKF,aAAY,UAAU,QAAQE,MAAK,UAAUF,QAAO;AAAA,MAClE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,KAAK,MAAc,SAAwD;AAC1E,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQG,OAAMH,aAAY,WAAW,QAAQG,OAAM,UAAUH,QAAO;AAAA,MACrE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IACC,KACA,SACkC;AAClC,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQI,MAAKJ,aAAY,UAAU,QAAQI,MAAKJ,QAAO;AAAA,MACxD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,gBAAgB,SAAkD;AACjE,WAAO,sBAAsB,KAAK,QAAQ,SAAS,QAAQ;AAAA,EAC5D;AACD;;;AClFO,IAAM,gBAAN,MAAoB;AAAA,EAG1B,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,KAAK,MAAY,SAAwD;AACxE,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQK,OAAMC,aAAY,WAAW,QAAQD,OAAM,WAAWC,QAAO;AAAA,MACtE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBA,OACC,cACA,SACgC;AAChC,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQC,eAAcD,aACtB,aAAa,QAAQC,eAAc,WAAWD,QAAO;AAAA,MACtD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IAAI,KAAa,SAAwD;AACxE,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQE,MAAKF,aAAY,UAAU,QAAQE,MAAK,WAAWF,QAAO;AAAA,MACnE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,KAAK,MAAc,SAAwD;AAC1E,WAAO,IAAI;AAAA,MACV,KAAK;AAAA,MACL,CAAC,QAAQG,OAAMH,aAAY,WAAW,QAAQG,OAAM,WAAWH,QAAO;AAAA,MACtE;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEA,gBAAgB,SAAkD;AACjE,WAAO,sBAAsB,KAAK,QAAQ,SAAS,SAAS;AAAA,EAC7D;AACD;;;AChFO,IAAM,SAAN,MAAa;AAAA,EAKnB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,SAAS,IAAI,aAAa,MAAM;AACrC,SAAK,UAAU,IAAI,cAAc,MAAM;AAAA,EACxC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AACD;;;ACPO,IAAM,eAAe,OAC3B,QACA,SACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,QAAM,OAAO,KAAK,UAAU;AAAA,IAC3B,WAAW,QAAQ;AAAA,IACnB,SAAS,QAAQ;AAAA,EAClB,CAAC;AAED,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU,EAAE,GAAG,OAAO,cAAc;AAAA,EACrC,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,UAAU,OAAO,cAAc,QAAQ,GAAG;AAAA,MACrD;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,QACA,MAAM;AAAA,MACP;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,UAAI,QAAQ,WAAW,KAAK;AAC3B,cAAM,IAAI;AAAA,UACT;AAAA,UACA,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,kCAAkC,MAAM,OAAO,EAAE;AAAA,IACxE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;AChGO,IAAM,eAAe,OAC3B,QACA,KACA,YACgC;AAChC,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU,EAAE,GAAG,OAAO,cAAc;AAAA,EACrC,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,UAAU,OAAO,cAAc,GAAG;AAAA,MAC7C;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,UAAM,MAAM,MAAM,QAAQ,KAAK;AAC/B,WAAO,IAAI;AAAA,EACZ,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,kCAAkC,MAAM,OAAO,EAAE;AAAA,IACxE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACzEO,IAAM,kBAAkB,OAC9B,QACA,KACA,YACqB;AACrB,MAAI,CAAC,QAAQ;AACZ,UAAM,IAAI,gBAAgB,iCAAiC;AAAA,EAC5D;AAEA,MAAI;AAEJ,MAAI,OAAO,iBAAiB,OAAO,KAAK,OAAO,aAAa,EAAE,SAAS,GAAG;AACzE,cAAU,EAAE,GAAG,OAAO,cAAc;AAAA,EACrC,OAAO;AACN,cAAU;AAAA,MACT,eAAe,UAAU,OAAO,SAAS;AAAA,MACzC,gBAAgB;AAAA,MAChB,QAAQ;AAAA,IACT;AAAA,EACD;AAEA,MAAI,WAAmB;AAEvB,MAAI,OAAO,aAAa;AACvB,eAAW,OAAO;AAAA,EACnB;AAEA,MAAI;AACH,UAAM,UAAU,MAAM;AAAA,MACrB,GAAG,QAAQ,UAAU,OAAO,cAAc,GAAG;AAAA,MAC7C;AAAA,QACC,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ,IAAI;AAChB,YAAM,YAAY,MAAM,QAAQ,KAAK;AACrC,UAAI,QAAQ,WAAW,OAAO,QAAQ,WAAW,KAAK;AACrD,cAAM,IAAI;AAAA,UACT,0BAA0B,SAAS;AAAA,UACnC,QAAQ;AAAA,UACR;AAAA,YACC,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,cACT,YAAY,QAAQ;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA,MACD;AACA,YAAM,IAAI,aAAa,eAAe,SAAS,IAAI,QAAQ,QAAQ;AAAA,QAClE,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,UACT,YAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AACA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,QAAI,iBAAiB,aAAa;AACjC,YAAM;AAAA,IACP;AACA,QAAI,iBAAiB,OAAO;AAC3B,YAAM,IAAI,YAAY,kCAAkC,MAAM,OAAO,EAAE;AAAA,IACxE;AACA,UAAM,IAAI;AAAA,MACT;AAAA,IACD;AAAA,EACD;AACD;;;ACxEO,IAAM,mBAAN,MAAuB;AAAA,EAG7B,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AAAA,EAClC;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,IAAI,SAAuD;AAC1D,WAAO,aAAa,KAAK,QAAQ,SAAS,QAAQ;AAAA,EACnD;AAAA,EAEA,IAAI,KAAyC;AAC5C,WAAO,aAAa,KAAK,QAAQ,KAAK,QAAQ;AAAA,EAC/C;AAAA,EAEA,OAAO,KAA8B;AACpC,WAAO,gBAAgB,KAAK,QAAQ,KAAK,QAAQ;AAAA,EAClD;AACD;;;ACzBO,IAAM,aAAN,MAAiB;AAAA;AAAA,EAKvB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,SAAS,IAAI,iBAAiB,MAAM;AAAA,EAE1C;AAAA,EAEA,aAAa,WAA+B;AAC3C,SAAK,SAAS;AAAA,EACf;AACD;;;ACNO,IAAM,YAAN,MAAgB;AAAA,EAWtB,YAAY,QAAuB;AAClC,SAAK,SAAS,aAAa,MAAM;AACjC,SAAK,QAAQ,IAAI,MAAM,KAAK,MAAM;AAClC,SAAK,SAAS,IAAI,OAAO,KAAK,MAAM;AACpC,SAAK,WAAW,IAAI,SAAS,KAAK,MAAM;AAExC,SAAK,OAAO,IAAI,KAAK,KAAK,MAAM;AAChC,SAAK,SAAS,IAAI,OAAO,KAAK,MAAM;AACpC,SAAK,YAAY,IAAI,UAAU,KAAK,MAAM;AAC1C,SAAK,aAAa,IAAI,WAAW,KAAK,MAAM;AAAA,EAC7C;AAAA,EAEA,cAAc,SAAuC;AACpD,QAAI,CAAC,KAAK,QAAQ;AACjB,WAAK,SAAS,EAAE,WAAW,IAAI,eAAe,CAAC,EAAE;AAAA,IAClD;AACA,SAAK,OAAO,gBAAgB,EAAE,GAAG,KAAK,OAAO,eAAe,GAAG,QAAQ;AAGvE,SAAK,MAAM,aAAa,KAAK,MAAM;AACnC,SAAK,OAAO,aAAa,KAAK,MAAM;AACpC,SAAK,SAAS,aAAa,KAAK,MAAM;AAEtC,SAAK,KAAK,aAAa,KAAK,MAAM;AAClC,SAAK,OAAO,aAAa,KAAK,MAAM;AACpC,SAAK,UAAU,aAAa,KAAK,MAAM;AACvC,SAAK,WAAW,aAAa,KAAK,MAAM;AAAA,EACzC;AAAA,EAEA,UAAU,KAAmB;AAC5B,QAAI,CAAC,KAAK,QAAQ;AACjB,WAAK,SAAS,EAAE,WAAW,GAAG;AAAA,IAC/B;AACA,SAAK,OAAO,YAAY;AAGxB,SAAK,MAAM,aAAa,KAAK,MAAM;AACnC,SAAK,OAAO,aAAa,KAAK,MAAM;AACpC,SAAK,SAAS,aAAa,KAAK,MAAM;AAEtC,SAAK,KAAK,aAAa,KAAK,MAAM;AAClC,SAAK,OAAO,aAAa,KAAK,MAAM;AACpC,SAAK,UAAU,aAAa,KAAK,MAAM;AACvC,SAAK,WAAW,aAAa,KAAK,MAAM;AAAA,EACzC;AAAA,EAEA,qBAAsC;AACrC,WAAO,mBAAmB,KAAK,MAAM;AAAA,EACtC;AACD;","names":["wait","wait","wait","headers","data","file","options","base64String","url","data","cid","file","options","base64String","url","data"]}